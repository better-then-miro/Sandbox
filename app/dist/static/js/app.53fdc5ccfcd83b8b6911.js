webpackJsonp([1],{HCSu:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n=i("Gu7T"),o=i.n(n),r=i("85RH"),s=i.n(r),c=i("Zrlr"),d=i.n(c),l=function t(e,i,a,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[];d()(this,t),this.Id=null,this.name="",this.description="",this.Type="",this.blocks=[],this.links=[],this.Id=e,Object.defineProperty(this,"Id",{writable:!1}),this.name=i,this.description=a,this.Type=n,this.blocks=o,this.links=r},h=function t(e,i,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d()(this,t),this.Id=null,this.name="",this.description="",this.diagrams=[],this.name=i,this.description=a,this.Id=e,Object.defineProperty(this,"Id",{writable:!1}),this.diagrams=n},u=i("mtWM");function p(t){var e=t.getBBox(),i={Id:t.data("Id"),width:Math.round(e.width),height:Math.round(e.height)};"Use-case"===t.data("Type")?i.coords=[Math.round(e.cx),Math.round(e.cy)]:i.coords=[Math.round(e.x),Math.round(e.y)],console.log("Properties to update: ",i),u.post("http://127.0.0.1:5000/updateBlockProperties",i).then(function(t){return console.log(t)})}var m={x1:0,y1:0,x2:0,y2:0},g=function(t,e,i,a){!1===this.data("isScaling")&&i>=m.x1&&a>=m.y1&&i<=m.x2&&a<=m.y2&&this.attr({transform:this.data("ot")+(this.data("ot")?"T":"t")+[t,e]})},v=function(){this.data("ot",this.transform().local)},w=function(){console.log("Stop dragging"),p(this)},f=null,_=null,b=1,y=1,D=function(){f.data("origTransform",f.transform().local)},C=function(t,e){var i=f.getBBox(),a=1,n=1;"topleft"===this.data("side")?(a=t>0?i.width/(i.width+t):(i.width-t)/i.width,n=e>0?i.height/(i.height+e):(i.height-e)/i.height):"topright"===this.data("side")?(a=t>0?(i.width+t)/i.width:i.width/(i.width-t),n=e>0?i.height/(i.height+e):(i.height-e)/i.height):"bottomleft"===this.data("side")?(a=t>0?i.width/(i.width+t):(i.width-t)/i.width,n=e>0?(i.height+e)/i.height:i.height/(i.height-e)):"bottomright"===this.data("side")&&(a=t>0?(i.width+t)/i.width:i.width/(i.width-t),n=e>0?(i.height+e)/i.height:i.height/(i.height-e)),f[0].getBBox().width*a>100&&(b=a),f[0].getBBox().height*n>50&&(y=n),f.attr({transform:f.data("origTransform")+(f.data("origTransform")?"S":"s")+b+","+y})},k=function(){};function j(t){var e=t.data("snap"),i=f.getBBox(),a=t.getBBox(),n=void 0,o=void 0;"Class"===t.data("Type")?(n=e.rect(i.x+i.width/a.width*5,i.y+i.height/a.height*5,i.width-i.width/a.width*10,i.height-i.height/a.height*10),o=e.text(i.x+i.width/a.width*5+(i.width-i.width/a.width*10)/2,i.y+i.height/a.height*5+(i.height-i.height/a.height*10)/2,t[1].node.textContent).attr({stroke:"white",dominantBaseline:"middle",textAnchor:"middle"})):"Use-case"===t.data("Type")&&(n=e.ellipse(i.cx,i.cy,Math.round((i.width-i.width/a.width*10)/2),Math.round((i.height-i.height/a.height*10)/2)),o=e.text(i.cx,i.cy,t[1].node.textContent).attr({stroke:"white",dominantBaseline:"middle",textAnchor:"middle"}));var r=e.group(n,o);r.data("Id",t.data("Id")),r.data("Type",t.data("Type")),r.drag(g,v,w),r.data("snap",t.data("snap")),r.data("isScaling",!1),r.dblclick(x),p(r),f.selectAll("handler").remove(),f.remove(),_=null}var x=function(){var t=this.data("snap");if(!1===this.data("isScaling")){null!=_&&j(_),_=this,this.data("isScaling",!0);var e=this.getBBox(),i=[];i[0]=t.circle(e.x,e.y,5).attr({class:"handler",fill:"blue"}),i[0].data("side","topleft"),i[0].drag(C,D,k),i[1]=t.circle(e.x+e.width,e.y,5).attr({class:"handler",fill:"blue"}),i[1].data("side","topright"),i[1].drag(C,D,k),i[2]=t.circle(e.x,e.y+e.height,5).attr({class:"handler",fill:"blue"}),i[2].data("side","bottomleft"),i[2].drag(C,D,k),i[3]=t.circle(e.x+e.width,e.y+e.height,5).attr({class:"handler",fill:"blue"}),i[3].data("side","bottomright"),i[3].drag(C,D,k),f=t.group(this,i[0],i[1],i[2],i[3])}else j(this)},T={name:"DiagramUi",props:["currentDiagram"],data:function(){return{snap:null,blockTitle:"",blockType:null}},mounted:function(){this.snap=s()("#mySvg"),this.init()},methods:{init:function(){var t=this;m={x1:10,y1:10,x2:510,y2:510},this.snap.attr({viewBox:"0 0 500 500"}),this.currentDiagram.blocks.forEach(function(e){var i=void 0,a=void 0;"Class"===e.Type?(i=t.snap.rect(e.coords[0],e.coords[1],e.width,e.height),a=t.snap.text(e.coords[0]+Math.round(e.width/2),e.coords[1]+Math.round(e.height/2),"Class name").attr({stroke:"white",dominantBaseline:"middle",textAnchor:"middle"})):"Use-case"===e.Type&&(i=t.snap.ellipse(e.coords[0],e.coords[1],Math.round(e.width/2),Math.round(e.height/2)),a=t.snap.text(e.coords[0],e.coords[1],"Use-case name").attr({stroke:"white",dominantBaseline:"middle",textAnchor:"middle"}));var n=t.snap.group(i,a);n.data("Id",e.Id),n.data("Type",e.Type),n.drag(g,v,w),n.data("snap",t.snap),n.data("isScaling",!1),n.dblclick(x)})},addNewBlock:function(){var t=this;if(null!=this.blockType&&""!==this.blockTitle.replaceAll(" ","")){var e={dId:this.currentDiagram.Id,type:this.blockType,coords:[250,250],width:100,height:50};(function(t){return console.log("New block properties: ",t),u.post("http://127.0.0.1:5000/createNewBlock",t).then(function(t){return t.data.bId})})(e).then(function(i){console.log("New block id: ",i);var a=void 0,n=void 0;"Class"===e.type?(a=t.snap.rect(e.coords[0],e.coords[1],e.width,e.height),n=t.snap.text(e.coords[0]+Math.round(e.width/2),e.coords[1]+Math.round(e.height/2),t.blockTitle).attr({stroke:"white",dominantBaseline:"middle",textAnchor:"middle"})):"Use-case"===e.type&&(a=t.snap.ellipse(e.coords[0],e.coords[1],Math.round(e.width/2),Math.round(e.height/2)),n=t.snap.text(e.coords[0],e.coords[1],t.blockTitle).attr({stroke:"white",dominantBaseline:"middle",textAnchor:"middle"}));var o=t.snap.group(a,n);o.data("Id",i),o.data("Type",e.type),o.drag(g,v,w),o.data("snap",t.snap),o.data("isScaling",!1),o.dblclick(x),t.blockType=null,t.blockTitle=""})}}}},P={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"flex","justify-content":"space-around"}},[i("svg",{staticClass:"editorSvg",attrs:{id:"mySvg",width:"500",height:"500"}}),t._v(" "),i("div",{staticStyle:{display:"flex","flex-direction":"column","margin-top":"20px"}},[i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.blockTitle,expression:"blockTitle"}],attrs:{id:"blockTitle",type:"text",placeholder:"Enter block title",name:"blockTitle"},domProps:{value:t.blockTitle},on:{input:function(e){e.target.composing||(t.blockTitle=e.target.value)}}}),t._v(" "),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.blockType,expression:"blockType"}],attrs:{type:"radio",id:"contactChoice1",name:"blockType",value:"Class"},domProps:{checked:t._q(t.blockType,"Class")},on:{change:function(e){t.blockType="Class"}}}),t._v(" "),i("label",{attrs:{for:"contactChoice1"}},[t._v("Class")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.blockType,expression:"blockType"}],attrs:{type:"radio",id:"contactChoice2",name:"blockType",value:"Use-case"},domProps:{checked:t._q(t.blockType,"Use-case")},on:{change:function(e){t.blockType="Use-case"}}}),t._v(" "),i("label",{attrs:{for:"contactChoice2"}},[t._v("Use-case")])]),t._v(" "),i("button",{staticClass:"btn icon-plus",attrs:{type:"button"},on:{click:function(e){return t.addNewBlock()}}},[t._v("\n        Add new block\n      ")])])])])},staticRenderFns:[]};var N=i("VU/8")(T,P,!1,function(t){i("q7XK")},"data-v-4ae163ac",null).exports,I=function t(e,i,a,n,o,r){d()(this,t),this.Id=null,this.Type="",this.coords=[null,null],this.width=null,this.height=null,this.Id=e,Object.defineProperty(this,"Id",{writable:!1}),this.Type=i,this.coords=[a,n],this.width=o,this.height=r,this.name=name},B={name:"DiagramController",components:{DiagramUi:N},props:["currentDiagram"],data:function(){return{showDiagramWindow:!1}},mounted:function(){this.init()},methods:{init:function(){var t,e=this;console.log("Diagram before getDiagramContent: ",this.currentDiagram),(t=this.currentDiagram.Id,console.log("Fetch content of diagram: ",t),u.get("http://127.0.0.1:5000/getDiagramContent",{params:{Id:t}}).then(function(t){return t.data})).then(function(t){t.blocks.forEach(function(t){e.currentDiagram.blocks.push(new I(t.Id,t.Type,t.coords[0],t.coords[1],t.width,t.height))})}).then(function(){e.showDiagramWindow=!0})}}},M={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.showDiagramWindow?e("diagram-ui",{attrs:{currentDiagram:this.currentDiagram}}):this._e()],1)},staticRenderFns:[]};var E={name:"App",components:{DiagramUi:N,DiagramController:i("VU/8")(B,M,!1,function(t){i("r5eL")},"data-v-2063c85f",null).exports},data:function(){return{projects:[],newName:"",newDescription:"",newDiagramType:"",currentProject:null,currentDiagram:null,showCreateNewProjectDialog:!1,showCreateNewDiagramDialog:!1,state:"project navigator"}},mounted:function(){var t;this.projects=(t=[],u.get("http://127.0.0.1:5000/getProjectList").then(function(e){e.data.forEach(function(e){t.push(new h(e.Id,e.name,e.description))})}),t)},methods:{addProject:function(){var t=new h(this.projects.length,this.newName,this.newDescription);this.projects=[].concat(o()(this.projects),[t]),this.showCreateNewProjectDialog=!1,this.showProject(t)},openProject:function(t){var e,i;this.showProject(t),this.currentProject.diagrams=(e=t.Id,i=[],u.get("http://127.0.0.1:5000/getDiagrams",{params:{Id:e}}).then(function(t){t.data.forEach(function(t){i.push(new l(t.Id,t.name,t.description,t.Type))})}),i)},showProject:function(t){this.currentProject=t,this.state="diagram navigator",this.newName="",this.newDescription=""},addDiagram:function(){var t=new l(this.projects.length,this.newName,this.newDescription,this.newDiagramType);this.currentProject.diagrams=[].concat(o()(this.currentProject.diagrams),[t]),this.showCreateNewDiagramDialog=!1,this.showDiagram(t)},openDiagram:function(t){this.showDiagram(t)},showDiagram:function(t){this.currentDiagram=t,this.state="diagram editor",this.newName="",this.newDescription=""},goHome:function(){this.state="project navigator",this.currentDiagram=null,this.currentProject=null}},watch:{showCreateNewProjectDialog:function(){console.log(this.showCreateNewProjectDialog)}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticClass:"navbar"},[i("button",{staticClass:"btn btn-1",on:{click:function(e){return t.goHome()}}},[t._v("\n      Home\n    ")]),t._v(" "),"project navigator"===t.state?i("h1",[t._v("Project navigator")]):"diagram navigator"===t.state?i("h1",[t._v('Project "'+t._s(t.currentProject.name)+'"')]):"diagram editor"===t.state?i("h1",[t._v('Diagram "'+t._s(t.currentDiagram.name)+'"')]):t._e(),t._v(" "),"project navigator"===t.state?i("button",{staticClass:"btn btn-1 btn-sep icon-plus",on:{click:function(e){t.showCreateNewProjectDialog=!0}}},[t._v("\n      Create new project\n    ")]):t._e(),t._v(" "),"diagram navigator"===t.state?i("button",{staticClass:"btn btn-1 btn-sep icon-plus",on:{click:function(e){t.showCreateNewDiagramDialog=!0}}},[t._v("\n      Create new diagram\n    ")]):t._e()]),t._v(" "),"project navigator"===t.state?i("div",{staticClass:"projectTable"},t._l(t.projects,function(e){return i("div",{key:e.Id,staticClass:"column"},[i("div",{staticClass:"card",on:{click:function(i){return t.openProject(e)}}},[i("p",[i("b",[t._v("Name:")]),t._v(" "+t._s(e.name))]),t._v(" "),i("p",[i("b",[t._v("Description:")]),t._v(" "+t._s(e.description))])])])}),0):"diagram navigator"===t.state?i("div",{staticClass:"projectTable"},t._l(t.currentProject.diagrams,function(e){return i("div",{key:e.Id,staticClass:"column"},[i("div",{staticClass:"card",on:{click:function(i){return t.openDiagram(e)}}},[i("p",[i("b",[t._v("Name:")]),t._v(" "+t._s(e.name))]),t._v(" "),i("p",[i("b",[t._v("Description:")]),t._v(" "+t._s(e.description))]),t._v(" "),i("p",[i("b",[t._v("Type:")]),t._v(" "+t._s(e.Type))])])])}),0):"diagram editor"===t.state?i("div",{staticClass:"diagramEditor"},[i("diagram-controller",{attrs:{"current-diagram":t.currentDiagram}})],1):t._e(),t._v(" "),t.showCreateNewProjectDialog?i("div",{staticClass:"newProjectModal",attrs:{id:"id01"}},[i("form",{staticClass:"newProjectModal-content"},[i("div",{staticClass:"formHeader"},[i("h1",[t._v("Create new project")]),t._v(" "),i("span",{staticClass:"closeForm",attrs:{title:"Close form"},on:{click:function(e){t.showCreateNewProjectDialog=!1}}},[t._v("X")])]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"newProjectForm"},[t._m(0),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{id:"NameProj",type:"text",placeholder:"Enter project name",name:"name",required:""},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),t._v(" "),t._m(1),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newDescription,expression:"newDescription"}],attrs:{id:"DescriptionProj",type:"text",placeholder:"Enter project description",name:"description"},domProps:{value:t.newDescription},on:{input:function(e){e.target.composing||(t.newDescription=e.target.value)}}}),t._v(" "),i("div",{staticClass:"newProjectButtons"},[i("button",{staticClass:"cancelbtn",attrs:{type:"button"},on:{click:function(e){t.showCreateNewProjectDialog=!1}}},[t._v("\n            Cancel\n          ")]),t._v(" "),i("button",{staticClass:"signupbtn",attrs:{type:"button"},on:{click:function(e){return t.addProject()}}},[t._v("Create")])])])])]):t._e(),t._v(" "),t.showCreateNewDiagramDialog?i("div",{staticClass:"newProjectModal"},[i("form",{staticClass:"newProjectModal-content"},[i("div",{staticClass:"formHeader"},[i("h1",[t._v("Create new diagram")]),t._v(" "),i("span",{staticClass:"closeForm",attrs:{title:"Close form"},on:{click:function(e){t.showCreateNewDiagramDialog=!1}}},[t._v("X")])]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"newProjectForm"},[t._m(2),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newName,expression:"newName"}],attrs:{id:"Name",type:"text",placeholder:"Enter diagram name",name:"name",required:""},domProps:{value:t.newName},on:{input:function(e){e.target.composing||(t.newName=e.target.value)}}}),t._v(" "),t._m(3),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.newDescription,expression:"newDescription"}],attrs:{id:"Description",type:"text",placeholder:"Enter diagram description",name:"description"},domProps:{value:t.newDescription},on:{input:function(e){e.target.composing||(t.newDescription=e.target.value)}}}),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),i("div",{staticClass:"newProjectButtons"},[i("button",{staticClass:"cancelbtn",attrs:{type:"button"},on:{click:function(e){t.showCreateNewDiagramDialog=!1}}},[t._v("\n            Cancel\n          ")]),t._v(" "),i("button",{staticClass:"signupbtn",attrs:{type:"button"},on:{click:function(e){return t.addDiagram()}}},[t._v("Create")])])])])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"NameProj"}},[e("b",[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"DescriptionProj"}},[e("b",[this._v("Description")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"Name"}},[e("b",[this._v("Name")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{attrs:{for:"Description"}},[e("b",[this._v("Description")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",[e("b",[this._v("Diagram Type")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("select",[e("option",[this._v("strict")]),this._v(" "),e("option",[this._v("free")])])}]};var U=i("VU/8")(E,S,!1,function(t){i("HCSu")},null,null).exports,A=i("/ocq");a.a.use(A.a);var H=new A.a({routes:[]});a.a.config.productionTip=!1,new a.a({el:"#app",router:H,components:{App:U},template:"<App/>"})},q7XK:function(t,e){},r5eL:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.53fdc5ccfcd83b8b6911.js.map