webpackJsonp([1],{EH3P:function(e,t){},Gfgk:function(e,t){e.exports=[{name:"Class-default",elements:[{shape:"rect",height:30,textFieldsCnts:[1],textFieldsNames:["<title>"]},{shape:"rect",textFieldsCnts:["*"],textFieldsNames:["Attributes"]},{shape:"rect",textFieldsCnts:["*"],textFieldsNames:["Operations"]}]},{name:"Use-case",elements:[{shape:"ellipse",textFieldsCnts:[1],textFieldsNames:["<title>"]}]},{name:"Actor",elements:[{"shape-svg":"actor.svg",textFieldsCnts:[1],textFieldsNames:["<title>"]}]},{name:"Class-Boundary",elements:[{"shape-svg":"boundary.svg",textFieldsCnts:[1],textFieldsNames:["<title>"]},{textFieldsCnts:["*"],textFieldsNames:["Attributes"]},{textFieldsCnts:["*"],textFieldsNames:["Operations"]}]},{name:"Class-Control",elements:[{"shape-svg":"controller.svg",textFieldsCnts:[1],textFieldsNames:["<title>"]},{textFieldsCnts:["*"],textFieldsNames:["Attributes"]},{textFieldsCnts:["*"],textFieldsNames:["Operations"]}]},{name:"Class-Entity",elements:[{"shape-svg":"entity.svg",textFieldsCnts:[1],textFieldsNames:["<title>"]},{textFieldsCnts:["*"],textFieldsNames:["Attributes"]},{textFieldsCnts:["*"],textFieldsNames:["Operations"]}]}]},JVK8:function(e,t){},Lgse:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("7+uW"),o=i("Gu7T"),s=i.n(o),l=i("85RH"),a=i.n(l),r=i("fZjL"),c=i.n(r),d=i("Xxa5"),h=i.n(d),u=i("exGp"),p=i.n(u),g=i("EaLy"),k=i("Zrlr"),v=i.n(k),f=function e(t,i,n,o){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"free",l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[];v()(this,e),this.Id=null,this.name="",this.description="",this.Type="",this.mode="",this.blocks=[],this.links=[],this.Id=t,Object.defineProperty(this,"Id",{writable:!1}),this.name=i,this.description=n,this.Type=o,this.mode=s,this.blocks=l,this.links=a},m=function e(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];v()(this,e),this.Id=null,this.name="",this.description="",this.diagrams=[],this.name=i,this.description=n,this.Id=t,Object.defineProperty(this,"Id",{writable:!1}),this.diagrams=o},y="http://127.0.0.1:5000/",b=i("mtWM"),w=void 0,I=void 0;function x(e,t,i,n){var o={Id:e,width:t,height:i,coords:n};console.log("Position properties to update: ",o),I.emit("updateBlockProperties",o)}function _(e,t){var i={Id:e,additionalFields:t};console.log("Additional properties to update: ",i),I.emit("updateBlockProperties",i)}function C(e,t){console.log("Requesting content of diagram: ",e),I.emit("getDiagramContent",{Id:e}),I.on("getDiagramContentHandler",t)}var D,B=(D=p()(h.a.mark(function e(t){return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log("New block properties: ",t),I.on("createNewBlockHandler",function(e){200===e.code?console.log("Server accepted block creation request"):console.log("Error occurred when creating block, error code: ",e.code)}),I.emit("createNewBlock",t);case 3:case"end":return e.stop()}},e,this)})),function(e){return D.apply(this,arguments)});var P={x1:0,y1:0,x2:0,y2:0},j=function(e,t,i,n){if(!1===this.data("blockView").isScaling){if(i>=P.x1&&n>=P.y1&&i<=P.x2&&n<=P.y2){this.attr({transform:this.data("ot")+(this.data("ot")?"T":"t")+[e,t]});for(var o=this.data("blockView").connections.length;o--;)this.data("blockView").snap.connection(this.data("blockView").connections[o])}(Math.abs(e)>2||Math.abs(t)>2)&&this.data("saveDrag",!0)}},N=function(){this.data("blockView").removeLinkPoints(),this.data("ot",this.transform().local),this.data("saveDrag",!1)},S=function(){if(!1!==this.data("saveDrag")){this.data("blockView").block.additionalFields&&c()(this.data("blockView").block.additionalFields).length>0&&(this[0][1].remove(),this[1][1].remove());var e,t=this.getBBox();e=[Math.round(t.x),Math.round(t.y)],this.data("blockView").block.setCoords(e);var i=this.data("blockView").block;x(i.Id,i.width,i.height,i.coords),this.data("blockView").redrawOnSnap()}},M=i("BO1k"),L=i.n(M),T=i("wxAW"),F=i.n(T),A=i("W3Iv"),V=i.n(A),E=i("d7EF"),G=i.n(E),H=i("daKz"),Z=i.n(H),$=(i("bRsR"),function(){function e(t){v()(this,e),this.snap=null,this.snap=t}return F()(e,[{key:"svgPrimitive_forName",value:function(e,t,i,n,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#60efff",l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"black";switch(e){case"rect":return this.svgPrimitive_Rectangle(t,i,n,o,s,l);case"ellipse":return this.svgPrimitive_Ellipse(t,i,n,o);case"actor":return this.svgCreate_Actor(t,i,n,o);default:return console.log("Don`t know such primitive"),this.svgPrimitive_Rectangle(t,i,n,o,"#ffffff","white")}}},{key:"svgPrimitive_fromFile",value:function(e,t,n,o,s){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:80,r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:80,c=this.snap.group(),d=i("rLMc")("./"+e);c.data("ot",c.transform().local),a.a.load(d,function(e){c.append(e)});var h=new a.a.Matrix;return h.scale(o/l,s/r,t,n),h.translate(t,n),c.transform(h),c}},{key:"svgPrimitive_Rectangle",value:function(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#60efff",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"black",l=this.snap.rect(e,t,i,n);return l.attr({fill:o,stroke:s,strokeWidth:1}),l}},{key:"svgConstruct",value:function(){for(var e=this.snap.group(),t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];return e.add(i),e}},{key:"svgCreate_Titile",value:function(e,t,i){return this.snap.text(e,t,i).attr({stroke:"black",dominantBaseline:"middle",textAnchor:"middle"})}},{key:"svgCreate_TextFields",value:function(e,t,i,n){var o=15,s=this.snap.group();for(var l in s.attr({"font-size":"13px"}),n){var a=n[l];if(void 0!==a){var r=this.snap.text(e+Math.round(i/2),t+o,l).attr({stroke:"black",dominantBaseline:"middle",textAnchor:"middle"});for(var c in o+=20,s.append(r),a){var d=this.snap.text(e+Math.round(i/2),t+o,a[c]).attr({dominantBaseline:"start",textAnchor:"middle"});o+=15,s.append(d)}s.mydata_resultingOffset=o}}return s}},{key:"svgCreate_byType",value:function(e,t,i,n,o){return"Class"===e?this.svgCreate_ClassBlock(t,i,n,o):"Use-case"===e?this.svgPrimitive_Ellipse(t,i,n,o):"Actor"===e?this.svgCreate_Actor(t,i,n,o):null}},{key:"svgCreate_ClassBlock",value:function(e,t,i,n){var o=this.snap.rect(e,t,i,n);return o.attr({fill:"#60efff",stroke:"black",strokeWidth:1}),o}},{key:"svgPrimitive_Ellipse",value:function(e,t,i,n){var o=Math.round(i/2),s=Math.round(n/2),l=this.snap.ellipse(e+o,t+s,o,s);return l.attr({fill:"#60efff",stroke:"black",strokeWidth:1}),l}},{key:"svgPrimitive_EllipseCenter",value:function(e,t,i,n){var o=this.snap.ellipse(e,t,i,n);return o.attr({fill:"#60efff",stroke:"black",strokeWidth:1}),o}},{key:"svgCreate_Actor",value:function(e,t,i,n){var o=this.snap.group();o.data("ot",o.transform().local),a.a.load(Z.a,function(e){o.append(e)});var s=new a.a.Matrix;return s.scale(i/80,n/80,e,t),s.translate(e,t),o.transform(s),o}},{key:"svgCreate_BlockFields",value:function(e,t,i,n,o){var s=15,l=this.snap.group();l.attr({"font-size":"13px"});var a=!0,r=!1,c=void 0;try{for(var d,h=L()(V()(o));!(a=(d=h.next()).done);a=!0){var u=d.value,p=G()(u,2),g=p[0],k=p[1];if(0!==k.length)if("stereotype"!==g){var v=this.snap.text(e+Math.round(i/2),t+s,g).attr({stroke:"black",dominantBaseline:"middle",textAnchor:"middle"});for(var f in s+=20,l.append(v),k){var m=this.snap.text(e+Math.round(i/2),t+s,k[f]).attr({dominantBaseline:"start",textAnchor:"middle"});s+=15,l.append(m)}s+=10}else if(""!==k){var y=this.snap.text(e+Math.round(i/2),t-40,k).attr({stroke:"black",dominantBaseline:"middle",textAnchor:"middle"});l.append(y)}}}catch(e){r=!0,c=e}finally{try{!a&&h.return&&h.return()}finally{if(r)throw c}}return l}}]),e}()),O=i("Gfgk"),U=function(){function e(t,i,n){v()(this,e),this.block=null,this.connections=null,this.isScaling=!1,this.snap=null,this.factory=null,this.blockGroup=null,this.block=t,this.snap=i,this.connections=n,this.factory=new $(i)}return F()(e,[{key:"redrawOnSnap",value:function(){var e=this;null!=this.blockGroup&&this.blockGroup.remove(),console.log(this.block),this.blockGroup=this.snap.group();var t=void 0;"Class"===this.block.Type?void 0===this.block.additionalFields.stereotype||""===this.block.additionalFields.stereotype?t=O.filter(function(e){return"Class-default"===e.name})[0]:(console.log("Stereotype",this.block),t=O.filter(function(t){return t.name==="Class-"+e.block.additionalFields.stereotype})[0]):t=O.filter(function(t){return t.name===e.block.Type})[0],this.blockGroup=this.constructSVGBlock(t,this.block);for(var i=this.connections.length;i--;)this.snap.connection(this.connections[i]);this.blockGroup.drag(j,N,S),this.blockGroup.dblclick(q),this.blockGroup.click(te),this.blockGroup.data("blockView",this)}},{key:"constructSVGBlock",value:function(e,t){var i;console.log("Template:",e);var n=e.elements,o=t.coords[0],s=t.coords[1],l=t.width,a=this.block.height,r=0,c=0,d=!0,h=!1,u=void 0;try{for(var p,g=L()(n);!(d=(p=g.next()).done);d=!0){var k=p.value;null!=k.height&&(r+=k.height,c++)}}catch(e){h=!0,u=e}finally{try{!d&&g.return&&g.return()}finally{if(h)throw u}}var v=[],f=!0,m=!1,y=void 0;try{for(var b,w=L()(n);!(f=(b=w.next()).done);f=!0){var I,x=b.value,_=Math.round((a-r)/(n.length-c));null!=x.height&&(_=x.height);var C=null;null!=x.shape?C=this.factory.svgPrimitive_forName(x.shape,o,s,l,_):null!=x["shape-svg"]?C=this.factory.svgPrimitive_fromFile(x["shape-svg"],o,s,l,_):(C=this.factory.svgPrimitive_forName("",o,s,l,_),console.log("Couldn`t find shape",x));for(var D=[],B=0,P=0;P<x.textFieldsCnts.length;P++){var j=x.textFieldsNames[P];if(1===x.textFieldsCnts[P]){var N=o+l/2,S=s+_/2;"<title>"===j?null!=x["shape-svg"]?D.push(this.factory.svgCreate_Titile(N,s-10,t.title)):D.push(this.factory.svgCreate_Titile(N,S,t.title)):D.push(this.factory.svgCreate_Titile(N,S,t.additionalFields[j]))}else if("*"===x.textFieldsCnts[P]){var M={};M[j]=this.block.additionalFields[j];var T=this.factory.svgCreate_TextFields(o,s+B,l,M);B+=T.mydata_resultingOffset,delete T.mydata_resultingOffset,D.push(T)}else console.log("Couldn`t understand field count type")}var F=(I=this.factory).svgConstruct.apply(I,D),A=this.factory.svgConstruct(C,F);v.push(A),s+=_}}catch(e){m=!0,y=e}finally{try{!f&&w.return&&w.return()}finally{if(m)throw y}}return(i=this.factory).svgConstruct.apply(i,v)}},{key:"drawLinkPoints",value:function(){var e=this,t=this.blockGroup.getBBox(),i=[];[{x:t.x+t.width/4,y:t.y-1},{x:t.x+t.width/2,y:t.y-1},{x:t.x+t.width/4*3,y:t.y-1},{x:t.x+t.width/4,y:t.y+t.height+1},{x:t.x+t.width/2,y:t.y+t.height+1},{x:t.x+t.width/4*3,y:t.y+t.height+1},{x:t.x-1,y:t.y+t.height/4},{x:t.x-1,y:t.y+t.height/2},{x:t.x-1,y:t.y+t.height/4*3},{x:t.x+t.width+1,y:t.y+t.height/4},{x:t.x+t.width+1,y:t.y+t.height/2},{x:t.x+t.width+1,y:t.y+t.height/4*3}].forEach(function(t){var n=e.snap.circle(t.x,t.y,3).attr({fill:"blue"});i.push(n)}),this.blockGroup.data("linkPoints",i)}},{key:"removeLinkPoints",value:function(){var e=this.blockGroup.data("linkPoints");null!=e&&(e.forEach(function(e){e.remove()}),this.blockGroup.data("linkPoints",null))}}]),e}(),z=null,R=null,W=1,Y=1,J=function(){z.data("origTransform",z.transform().local)},K=function(e,t){var i=z.getBBox(),n=1,o=1;"topleft"===this.data("side")?(n=e>0?i.width/(i.width+e):(i.width-e)/i.width,o=t>0?i.height/(i.height+t):(i.height-t)/i.height):"topright"===this.data("side")?(n=e>0?(i.width+e)/i.width:i.width/(i.width-e),o=t>0?i.height/(i.height+t):(i.height-t)/i.height):"bottomleft"===this.data("side")?(n=e>0?i.width/(i.width+e):(i.width-e)/i.width,o=t>0?(i.height+t)/i.height:i.height/(i.height-t)):"bottomright"===this.data("side")&&(n=e>0?(i.width+e)/i.width:i.width/(i.width-e),o=t>0?(i.height+t)/i.height:i.height/(i.height-t)),z[0].getBBox().width*n>100&&(W=n),z[0].getBBox().height*o>50&&(Y=o),z.attr({transform:z.data("origTransform")+(z.data("origTransform")?"S":"s")+W+","+Y})},X=function(){};function Q(e){z[0].remove();var t=z.getBBox();e.data("blockView").block.setCoords([Math.round(t.x),Math.round(t.y)]),e.data("blockView").block.setWidth(Math.round(t.width)),e.data("blockView").block.setHeight(Math.round(t.height)),e.data("blockView").isScaling=!1;var i=e.data("blockView").block;x(i.Id,i.width,i.height,i.coords),e.data("blockView").redrawOnSnap(),z.remove(),R=null}var q=function(){this.data("blockView").removeLinkPoints();var e=this.data("blockView").snap;if(null!=R&&R!==this&&Q(R),R=this,!1===this.data("blockView").isScaling){this.data("blockView").isScaling=!0;var t=this.getBBox(),i=[];i[0]=e.circle(t.x,t.y,5).attr({class:"handler",fill:"blue"}),i[0].data("side","topleft"),i[0].drag(K,J,X),i[1]=e.circle(t.x+t.width,t.y,5).attr({class:"handler",fill:"blue"}),i[1].data("side","topright"),i[1].drag(K,J,X),i[2]=e.circle(t.x,t.y+t.height,5).attr({class:"handler",fill:"blue"}),i[2].data("side","bottomleft"),i[2].drag(K,J,X),i[3]=e.circle(t.x+t.width,t.y+t.height,5).attr({class:"handler",fill:"blue"}),i[3].data("side","bottomright"),i[3].drag(K,J,X),z=e.group(this,i[0],i[1],i[2],i[3])}else Q(this)},ee=null,te=function(){U.prototype.isPrototypeOf(this.data("blockView"))&&(null!==ee&&ee.removeLinkPoints(),(ee=this.data("blockView")).drawLinkPoints())},ie=null,ne=function(){null!==this.data("lineObject")&&(ie=this.data("lineObject"))},oe=function(){ee=null},se=function(){ie=null};a.a.plugin(function(e,t,i){var n=function(e){"none"!==this.line.attr("stroke")&&this.line.attr({stroke:e}),"none"!==this.bg.attr("stroke")&&this.bg.attr({stroke:e}),void 0!==this.arrow&&this.arrow.attr({stroke:e,fill:e})};i.prototype.connection=function(e,t,i,o){var s="#000",l="#000";e.line&&e.from&&e.to&&(e=(s=e).from,t=s.to,o=s.linkType);var a=e.blockGroup.getBBox(),r=t.blockGroup.getBBox(),c=20;"Association(Bidirectional)"===o&&(c=0);for(var d=[{x:a.x+a.width/4,y:a.y-1},{x:a.x+a.width/2,y:a.y-1},{x:a.x+a.width/4*3,y:a.y-1},{x:a.x+a.width/4,y:a.y+a.height+1},{x:a.x+a.width/2,y:a.y+a.height+1},{x:a.x+a.width/4*3,y:a.y+a.height+1},{x:a.x-1,y:a.y+a.height/4},{x:a.x-1,y:a.y+a.height/2},{x:a.x-1,y:a.y+a.height/4*3},{x:a.x+a.width+1,y:a.y+a.height/4},{x:a.x+a.width+1,y:a.y+a.height/2},{x:a.x+a.width+1,y:a.y+a.height/4*3},{x:r.x+r.width/4,y:r.y-1-c},{x:r.x+r.width/2,y:r.y-1-c},{x:r.x+r.width/4*3,y:r.y-1-c},{x:r.x+r.width/4,y:r.y+r.height+1+c},{x:r.x+r.width/2,y:r.y+r.height+1+c},{x:r.x+r.width/4*3,y:r.y+r.height+1+c},{x:r.x-1-c,y:r.y+r.height/4},{x:r.x-1-c,y:r.y+r.height/2},{x:r.x-1-c,y:r.y+r.height/4*3},{x:r.x+r.width+1+c,y:r.y+r.height/4},{x:r.x+r.width+1+c,y:r.y+r.height/2},{x:r.x+r.width+1+c,y:r.y+r.height/4*3}],h={},u=[],p=0,g=0,k=void 0,v=0;v<12;v+=1)for(var f=12;f<24;f+=1)p=Math.abs(d[v].x-d[f].x),g=Math.abs(d[v].y-d[f].y),u.push(p+g),h[u[u.length-1]]=[v,f];var m=d[(k=0===u.length?[0,4]:h[Math.min.apply(Math,u)])[0]].x,y=d[k[0]].y,b=d[k[1]].x,w=d[k[1]].y;p=Math.max(Math.abs(m-b)/2,10),g=Math.max(Math.abs(y-w)/2,10);var I=["M"+m.toFixed(3),""+y.toFixed(3),b.toFixed(3),w.toFixed(3)].join(","),x=null;if(b===r.x-21?x=[b,w-5,b,w+5,b+20,w].join(","):b===r.x+r.width+21&&(x=[b,w-5,b,w+5,b-20,w].join(",")),w===r.y-21?x=[b-5,w,b+5,w,b,w+20].join(","):w===r.y+r.height+21&&(x=[b-5,w,b+5,w,b,w-20].join(",")),!s||!s.line){var _=void 0;if("Association"===o){var C=this.polyline().attr({stroke:"#000",fill:"#000",points:x});_={bg:l.split&&this.path(I).attr({stroke:l,fill:"none","stroke-width":5}),line:this.path(I).attr({stroke:s,fill:"none"}),linkType:o,from:e,to:t,arrow:C,lId:i,changeColor:n}}else if("Association(Bidirectional)"===o)_={bg:l.split&&this.path(I).attr({stroke:l,fill:"none","stroke-width":5}),line:this.path(I).attr({stroke:s,fill:"none"}),linkType:o,from:e,to:t,lId:i,changeColor:n};else if("Dependency"===o){var D=this.polyline().attr({stroke:"#000",fill:"#000",points:x});_={bg:l.split&&this.path(I).attr({fill:"none"}),line:this.path(I).attr({stroke:s,fill:"none","stroke-dasharray":"10 10","stroke-dashoffset":10,"stroke-width":5}),linkType:o,from:e,to:t,arrow:D,lId:i,changeColor:n}}else _={bg:l.split&&this.path(I).attr({stroke:s,fill:"none","stroke-width":5}),line:this.path(I).attr({stroke:s,fill:"none"}),linkType:o,from:e,to:t,lId:i,changeColor:n};return _.line.data({lineObject:_}),_}s.bg.attr({path:I}),"Association"===o?(s.line.attr({path:I}),s.arrow.attr({points:x})):"Association(Bidirectional)"===o?s.line.attr({path:I}):"Dependency"===o?(s.line.attr({path:I,"stroke-dasharray":"10 10","stroke-dashoffset":10,"stroke-width":5}),s.arrow.attr({points:x})):s.line.attr({path:I})}});var le={name:"DiagramUi",props:{currentDiagram:f},emits:{"ready-add-new-link":{sourceID:Number,targetID:Number},"block-view-selected":U,"link-selected":Object,"turn-off-link-mode":null},data:function(){return{snap:null,selectedBlockView:null,selectedLink:null,snapBlocks:[],snapLinks:[],linkSourceBlock:null,isLinkAddMode:!1,height:800,width:800}},mounted:function(){this.snap=a()("#mySvg"),this.init()},methods:{init:function(){var e,t,i,n,o=this,s=this.$refs.canvas.getBoundingClientRect();e=s.x,t=s.y,i=s.x+s.width,n=s.y+s.height,P={x1:e,y1:t,x2:i,y2:n},this.snap.attr({viewBox:"0 0 "+this.width+" "+this.height}),this.snap.rect(0,0,this.width,this.height).attr({fill:"none",stroke:"black",strokeWidth:2}),this.currentDiagram.blocks.forEach(function(e){var t=new U(e,o.snap,o.snapLinks);t.redrawOnSnap(),o.snapBlocks.push(t)}),this.currentDiagram.links.forEach(function(e){var t=o.snapBlocks.filter(function(t){return t.block.Id===e.sId}),i=o.snapBlocks.filter(function(t){return t.block.Id===e.tId});if(1===t.length&&1===i.length){var n=o.snap.connection(t[0],i[0],e.Id,e.Type);n.line.click(ne),o.snapLinks.push(n)}else console.log("Incorrect link parameters!")})},drawNewBlock:function(e){var t=new U(e,this.snap,this.snapLinks);t.redrawOnSnap(),this.snapBlocks.push(t)},updateInfo:function(){console.log(ee,ie),null!==ee&&(this.selectedBlockView===ee?(this.selectedBlockView.removeLinkPoints(),this.selectedBlockView=null,oe(),this.$emit("block-view-selected",this.selectedBlockView)):(null!==this.selectedLink&&(this.selectedLink=null,se(),this.$emit("link-selected",this.selectedLink)),console.log("Update block"),this.selectedBlockView=ee,this.$emit("block-view-selected",this.selectedBlockView),this.isLinkAddMode?null!=this.linkSourceBlock&&this.linkSourceBlock.block.Id!==ee.block.Id?(console.log("ready-add-new-link"),this.$emit("ready-add-new-link",{sourceID:this.linkSourceBlock.block.Id,targetID:ee.block.Id})):(this.linkSourceBlock=ee,console.log("first tap"),console.log(this.linkSourceBlock)):this.linkSourceBlock=null)),null!==ie&&(this.selectedLink===ie?(this.selectedLink=null,se(),this.$emit("link-selected",this.selectedLink)):(null!==this.selectedBlockView&&(this.selectedBlockView=null,oe(),this.$emit("block-view-selected",this.selectedBlockView)),this.selectedLink=ie,this.$emit("link-selected",this.selectedLink)))},drawNewLink:function(e,t,i,n){console.log("Drawing new link");var o=this.snap.connection(i,n,t,e);o.line.click(ne),this.snapLinks.push(o),this.linkSourceBlock=null,this.isLinkAddMode=!1,this.$emit("turn-off-link-mode")},toggleLinkMode:function(e){this.isLinkAddMode=e.bool},changeFields:function(){this.selectedBlockView.redrawOnSnap()}}},ae={render:function(){var e=this.$createElement;return(this._self._c||e)("svg",{ref:"canvas",staticClass:"editorSvg",attrs:{id:"mySvg",height:this.height,width:this.width},on:{click:this.updateInfo}})},staticRenderFns:[]};var re=i("VU/8")(le,ae,!1,function(e){i("dZ/2")},"data-v-67ad3290",null).exports,ce={name:"SelectionEntry",props:{objectType:String,isBlock:Boolean,selectedEntry:String},emits:{"entry-selected":null},data:function(){return{snap:null,factory:null}},mounted:function(){this.isBlock&&(this.snap=a()("#svgID_"+this.objectType),this.snap.attr({viewBox:"0 0 80 80"}),this.factory=new $(this.snap),this.factory.svgCreate_byType(this.objectType,0,0,80,80))},methods:{select:function(){console.log("Entry selected: ",this.objectType),this.$emit("entry-selected",{objectType:this.objectType,isBlock:this.isBlock})}},computed:{isSelected:function(){return this.objectType===this.selectedEntry}}},de={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"selection-entry",class:{selected:e.isSelected},staticStyle:{display:"flex","flex-direction":"column",border:"1px solid black"},on:{click:e.select}},[e.isBlock?i("svg",{staticClass:"blockSvg",attrs:{id:"svgID_"+e.objectType,height:"60",width:"60"}}):e._e(),e._v("\n  "+e._s(e.objectType)+"\n")])},staticRenderFns:[]};var he={name:"SidePanel",components:{SelectionEntry:i("VU/8")(ce,de,!1,function(e){i("EH3P")},"data-v-4bf741ad",null).exports},props:{isLinkAddMode:Boolean,supportedBlockTypes:Array,supportedLinkTypes:Array},emits:{"toggle-link-mode":{bool:Boolean},"create-block":{Type:String,title:String}},data:function(){return{blockTitle:"",blockType:null,linkType:null}},methods:{addNewBlock:function(){if(null!=this.blockType){var e=void 0;e=""===this.blockTitle.replaceAll(" ","")?this.blockType:this.blockTitle,this.$emit("create-block",{Type:this.blockType,title:e}),this.clear()}},toggleLinkMode:function(){this.$emit("toggle-link-mode",{bool:!this.isLinkAddMode})},clear:function(){this.blockTitle="",this.blockType=null,this.linkType=null},changeSelected:function(e){e.isBlock?this.blockType=e.objectType:this.linkType=e.objectType}}},ue={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{width:"300px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.blockTitle,expression:"blockTitle"}],attrs:{id:"blockTitle",type:"text",placeholder:"Enter block title",name:"blockTitle"},domProps:{value:e.blockTitle},on:{input:function(t){t.target.composing||(e.blockTitle=t.target.value)}}}),e._v(" "),i("div",{staticClass:"selection-grid",staticStyle:{display:"flex","flex-direction":"row"}},e._l(e.supportedBlockTypes,function(t){return i("selection-entry",{key:t,attrs:{"object-type":t,"is-block":!0,"selected-entry":e.blockType},on:{"entry-selected":e.changeSelected}})}),1),e._v(" "),i("button",{staticClass:"btn icon-plus sidePanelBtn",attrs:{type:"button"},on:{click:function(t){return e.addNewBlock()}}},[e._v("\n    Add new block\n  ")]),e._v(" "),i("div",{staticClass:"selection-grid",staticStyle:{display:"flex","flex-direction":"column"}},e._l(e.supportedLinkTypes,function(t){return i("selection-entry",{key:t,attrs:{"object-type":t,"is-block":!1,"selected-entry":e.linkType},on:{"entry-selected":e.changeSelected}})}),1),e._v(" "),i("div",{staticStyle:{display:"flex","flex-direction":"row"}},[e.isLinkAddMode?e._e():i("button",{staticClass:"btn icon-plus sidePanelBtn",attrs:{type:"button"},on:{click:function(t){return e.toggleLinkMode()}}},[e._v("\n      Enable link mode\n    ")]),e._v(" "),e.isLinkAddMode?i("button",{staticClass:"btn icon-plus sidePanelBtn",attrs:{type:"button"},on:{click:function(t){return e.toggleLinkMode()}}},[e._v("\n      Disable link mode\n    ")]):e._e()])])},staticRenderFns:[]};var pe=i("VU/8")(he,ue,!1,function(e){i("Lgse")},"data-v-b2495986",null).exports,ge=i("gRE1"),ke=i.n(ge),ve={name:"EditingPanel",props:{selectedBlockView:U,selectedLink:Object},emits:{"close-panel":null,"apply-changes":{additionalFields:{},title:String,description:String},"item-deleted":{},"delete-block":{blockToDelete:Object},"delete-link":Object},data:function(){return{snap:null,selectedStereotype:""}},mounted:function(){this.updateStereotypySelection()},updated:function(){this.updateStereotypySelection()},methods:{close:function(){this.$emit("close-panel")},updateStereotypySelection:function(){if(this.selectedBlockView.block.additionalFields&&this.selectedBlockView.block.additionalFields.stereotype){var e=this.selectedBlockView.block.additionalFields.stereotype;for(var t in ke()(this.$refs.selectStereotype[0]))void 0!==this.$refs.selectStereotype[0][t]&&this.$refs.selectStereotype[0][t].value===e&&(this.$refs.selectStereotype[0][t].selected=!0)}},apply:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t={};if(null!==this.selectedBlockView.block.additionalFields){var i=c()(this.selectedBlockView.block.additionalFields);for(var n in i)t[i[n]]=[];this.$refs.additionalFieldsSection.querySelectorAll("input").forEach(function(e){e.id in t||(t[e.id]=[]),""!==e.value&&t[e.id].push(e.value)}),""!==e&&t[e].push("Value"),null!=this.selectedBlockView.block.additionalFields.stereotype&&(t.stereotype=this.selectedStereotype)}this.$emit("apply-changes",{additionalFields:t,title:this.$refs.blockTitle.value,description:this.$refs.blockDescription.value})},addNewItem:function(e){this.apply(e)},deleteItem:function(e,t){var i={};this.$refs.additionalFieldsSection.querySelectorAll("input").forEach(function(n){n.id in i==!1&&(i[n.id]=[]),!1==(n.id===e&&n.value===t)&&i[n.id].push(n.value)}),this.$emit("item-deleted",i)},deleteBlock:function(){this.$emit("delete-block",{blockToDelete:this.selectedBlockView})},deleteLink:function(){this.$emit("delete-link",this.selectedLink)}}},fe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[null!=e.selectedBlockView?i("div",{staticClass:"editing-panel"},[i("div",{staticClass:"panel-header"},[i("h2",[e._v("Block modification")]),e._v(" "),i("span",{staticClass:"closeForm",attrs:{title:"Close panel"},on:{click:e.close}},[e._v("X")])]),e._v(" "),i("h3",{staticClass:"input-title",staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[e._v("\n        Name:\n    ")]),e._v(" "),i("input",{ref:"blockTitle",staticStyle:{"padding-left":"15px","padding-top":"5px","margin-bottom":"5px","font-size":"17px"},attrs:{id:"selectedBlockTitle",type:"text",placeholder:"Enter block title",name:"blockTitle"},domProps:{value:e.selectedBlockView.block.title}}),e._v(" "),i("h3",{staticClass:"input-title",staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[e._v("\n        Description:\n    ")]),e._v(" "),i("input",{ref:"blockDescription",staticStyle:{"padding-left":"15px","padding-top":"5px","margin-bottom":"5px","font-size":"17px"},attrs:{id:"selectedBlockDescription",type:"text",placeholder:"Enter block description",name:"blockDescription"},domProps:{value:e.selectedBlockView.block.description}}),e._v(" "),e.selectedBlockView.block.additionalFields?i("div",e._l(Object.keys(e.selectedBlockView.block.additionalFields),function(t){return i("div",{key:t},["stereotype"==t?i("div",[i("h3",{staticClass:"input-title",staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[e._v("\n            Stereotype\n          ")]),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedStereotype,expression:"selectedStereotype"}],ref:"selectStereotype",refInFor:!0,on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.selectedStereotype=t.target.multiple?i:i[0]}}},[i("option",[e._v("Boundary")]),e._v(" "),i("option",[e._v("Control")]),e._v(" "),i("option",[e._v("Entity")]),e._v(" "),i("option")])]):e._e()])}),0):e._e(),e._v(" "),e.selectedBlockView.block.additionalFields?i("div",{ref:"additionalFieldsSection"},e._l(Object.keys(e.selectedBlockView.block.additionalFields),function(t){return i("div",{key:t},["Operations"==t||"Attributes"==t?i("div",[i("h3",{staticClass:"input-title",staticStyle:{"margin-top":"5px","margin-bottom":"5px"}},[e._v("\n            "+e._s(t)+"\n          ")]),e._v(" "),i("ul",{staticClass:"additionalFieldList"},e._l(e.selectedBlockView.block.additionalFields[t],function(n){return i("li",{key:n},[i("div",{staticStyle:{display:"flex","flex-direction":"row","align-items":"center"}},[i("input",{staticClass:"additionalFieldItem",attrs:{id:t},domProps:{value:n}}),e._v(" "),i("button",{staticClass:"deleteAttributeValueBtn",attrs:{role:"button"},on:{click:function(i){return e.deleteItem(t,n)}}},[e._v("\n                  X\n                ")])])])}),0),e._v(" "),i("button",{staticClass:"addNewAttributeValueBtn",attrs:{role:"button"},on:{click:function(i){return e.addNewItem(t)}}},[e._v("\n            Add new item\n          ")])]):"stereotype"!==t?i("div",[i("div",{staticClass:"input-title"},[e._v(e._s(t)+":")]),e._v(" "),i("input",{attrs:{type:"text",placeholder:"Enter property value"},domProps:{value:e.selectedBlockView.block.additionalFields[t]}})]):e._e()])}),0):e._e(),e._v(" "),i("button",{staticClass:"btn btn-1",staticStyle:{"margin-left":"20px"},on:{click:function(t){return e.apply("")}}},[e._v("\n      Apply Changes\n    ")]),e._v(" "),i("button",{staticClass:"btn btn-1",staticStyle:{"margin-left":"20px",background:"red",color:"white"},on:{click:function(t){return e.deleteBlock()}}},[e._v("\n      Delete block\n    ")])]):e._e(),e._v(" "),null!=e.selectedLink?i("div",[i("button",{staticClass:"btn btn-1",staticStyle:{"margin-left":"20px",background:"red",color:"white"},on:{click:function(t){return e.deleteLink()}}},[e._v("\n      Delete link\n    ")])]):e._e()])},staticRenderFns:[]};var me=i("VU/8")(ve,fe,!1,function(e){i("iWbR")},"data-v-200b94d2",null).exports,ye=function(){function e(t,i,n,o,s,l){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Default name "+t,r=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;v()(this,e),this.Id=null,this.Type="",this.coords=[null,null],this.width=null,this.height=null,this.title="",this.description="",this.additionalFields={},this.Id=t,Object.defineProperty(this,"Id",{writable:!1}),this.Type=i,this.coords=[n,o],this.width=s,this.height=l,this.description=r,""===a.replaceAll(" ","")?this.title=i:this.title=a,"Class"===this.Type&&null===c?(this.additionalFields.Attributes=[],this.additionalFields.Operations=[],this.additionalFields.stereotype=""):this.additionalFields=c}return F()(e,[{key:"setTitle",value:function(e){this.title=e}},{key:"setDescription",value:function(e){this.description=e}},{key:"setCoords",value:function(e){this.coords=e}},{key:"setWidth",value:function(e){this.width=e}},{key:"setHeight",value:function(e){this.height=e}},{key:"setAdditionalFields",value:function(e){this.additionalFields=e}},{key:"addAttribute",value:function(e){"Class"===this.Type&&this.additionalFields.attrs.push(e)}},{key:"addMethod",value:function(e){"Class"===this.Type&&this.additionalFields.attrs.push(e)}}]),e}(),be=function e(t,i,n,o){v()(this,e),this.Id=null,this.Type="",this.sId=null,this.tId=null,this.Id=t,Object.defineProperty(this,"Id",{writable:!1}),this.Type=i,this.sId=n,this.tId=o},we=i("PPhy"),Ie={name:"DiagramController",components:{DiagramUi:re,SidePanel:pe,EditingPanel:me},props:{currentDiagram:f},data:function(){return{showDiagramWindow:!1,isLinkAddMode:!1,keyOfDiagramUI:0,selectedBlockView:null,selectedLink:null,newBlockProperties:null,newLinkProperties:null,versionNo:null}},mounted:function(){this.init()},methods:{init:function(){var e;I=Object(g.a)(y+"main"),C(this.currentDiagram.Id,this.loadDiagramContent),e=this.blockModifierCallback,I.on("updatePropertiesHandler",function(t){200===t.code?(console.log("New properties arrived!",t),e(t)):console.log("Error occurred in updatePropertiesHandler, error code: ",t.code)}),function(e){I.on("deleteBlockHandler",function(t){200===t.code&&(console.log("Delete block arrived!"),e(t))})}(this.blockDeleteCallback),function(e){I.on("deleteLinkHandler",function(t){200===t.code&&(console.log("Delete link arrived!"),e(t))})}(this.deleteLinkCallback),function(e){I.on("spawnNewLinkHandler",function(t){e(t)})}(this.addNewLinkHandler),function(e){I.on("spawnNewBlockHandler",function(t){e(t)})}(this.addNewBlockHandler)},blockModifierCallback:function(e){console.log("blockModifierCallback. Data:",e),null==e.code||200===e.code?null!=e.version&&Math.abs(e.version-this.versionNo)>1?C(this.currentDiagram.Id,this.loadDiagramContent):(this.$refs.diagramUI.snapBlocks.forEach(function(t){t.block.Id===e.Id&&(void 0!==e.coords&&t.block.setCoords(e.coords),void 0!==e.width&&t.block.setWidth(e.width),void 0!==e.width&&t.block.setHeight(e.height),void 0!==e.title&&t.block.setTitle(e.title),void 0!==e.description&&t.block.setDescription(e.description),void 0!==e.additionalFields&&t.block.setAdditionalFields(e.additionalFields),t.redrawOnSnap())}),null!=e.version&&(this.versionNo=e.version)):console.log("Error occurred in blockModifierCallback, error code: ",e.code)},blockDeleteCallback:function(e){var t=this;if(null==e.code||200===e.code)if(null!=e.version&&Math.abs(e.version-this.versionNo)>1)C(this.currentDiagram.Id,this.loadDiagramContent);else{var i=void 0;this.$refs.diagramUI.snapBlocks.forEach(function(t){t.block.Id===e.bId&&(i=t)}),this.selectedBlockView=null,this.selectedLink=null,i.removeLinkPoints(),i.blockGroup.remove();var n=i.block.Id,o=[];this.$refs.diagramUI.snapLinks.forEach(function(e){var t=e.from.block.Id,i=e.to.block.Id;t!==n&&i!==n||o.push(e)}),o.forEach(function(e){t.deleteLinkFromSnap(e,!1)});var s=this.$refs.diagramUI.snapBlocks.indexOf(i);this.$refs.diagramUI.snapBlocks.splice(s,1),this.selectedBlockView=null,null!=e.version&&(this.versionNo=e.version)}else console.log("Error occurred in blockDeleteCallback, error code: ",e.code)},deleteLinkCallback:function(e){if(null==e.code||200===e.code)if(null!=e.version&&Math.abs(e.version-this.versionNo)>1)C(this.currentDiagram.Id,this.loadDiagramContent);else{var t=void 0;this.$refs.diagramUI.snapLinks.forEach(function(i){console.log(i),i.lId===e.lId&&(t=i)}),void 0!==t&&this.deleteLinkFromSnap(t,!1),null!=e.version&&(this.versionNo=e.version)}else console.log("Error occurred in deleteLinkCallback, error code: ",e.code)},loadDiagramContent:function(e){var t=this;null==e.code||200===e.code?(null!=e.version&&(this.versionNo=e.version,console.log("New version: ",this.versionNo)),console.log("Diagram content ",e),e.blocks.forEach(function(e){t.currentDiagram.blocks.push(new ye(e.Id,e.Type,e.coords[0],e.coords[1],e.width,e.height,e.title,e.description,e.additionalFields))}),e.links.forEach(function(e){t.currentDiagram.links.push(new be(e.Id,e.Type,e.sId,e.tId))}),this.showDiagramWindow=!0):console.log("Error occurred in loadDiagramContent callback, error code: ",e.code)},addNewBlock:function(e){this.newBlockProperties={dId:this.currentDiagram.Id,Type:e.Type,coords:[250,250],width:80,height:80,title:e.title},B(this.newBlockProperties)},addNewBlockHandler:function(e){if(null!=e.version&&Math.abs(e.version-this.versionNo)>1)C(this.currentDiagram.Id,this.loadDiagramContent);else{console.log("New block ID:",e.Id);var t=new ye(e.Id,e.Type,e.coords[0],e.coords[1],e.width,e.height,e.title);this.currentDiagram.blocks.push(t),this.$refs.diagramUI.drawNewBlock(t),this.newBlockProperties=null,null!=e.version&&(this.versionNo=e.version)}},deleteLinkFromSnap:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.selectedBlockView=null,this.selectedLink=null;var i,n=this.$refs.diagramUI.snapLinks.indexOf(e);console.log("Delete link:",e,n),n>-1&&(this.$refs.diagramUI.snapLinks.splice(n,1),e.line.remove(),e.bg.remove(),void 0!==e.arrow&&e.arrow.remove()),t&&(i=e.lId,console.log("Deleting link: ",i),I.emit("deleteLink",{Id:i}))},deleteBlockFromSnap:function(e){!function(e){console.log("Deleting block: ",e),I.on("deleteBlockHandler",function(e){200!==e.code&&console.log("Error occurred when deleting block, error code: ",e.code)}),I.emit("deleteBlock",{Id:e})}(e.blockToDelete.block.Id)},redrawDiagramUI:function(){this.keyOfDiagramUI+=1},toggleLinkMode:function(e){this.isLinkAddMode=e.bool,this.$refs.diagramUI.toggleLinkMode(e)},turnOffLinkMode:function(){this.isLinkAddMode=!1},addNewLink:function(e){var t=this.$refs.sidePanel.linkType;if(null!=t)if(null!=e.targetID&&null!=e.sourceID){var i={dId:this.currentDiagram.Id,Type:t,sId:e.sourceID,tId:e.targetID};console.log("Creating new link"),this.newLinkProperties=i,function(e){console.log("New link properties: ",e),I.on("createNewLinkHandler",function(e){200===e.code?console.log("Server accepted link creation request"):console.log("Error occurred when creating link, error code: ",e.code)}),I.emit("createNewLink",e)}(i)}else console.log("Link creation error: null as ID")},addNewLinkHandler:function(e){if(null!=e.version&&Math.abs(e.version-this.versionNo)>1)C(this.currentDiagram.Id,this.loadDiagramContent);else{console.log("New Link ID:",e.Id);var t=new be(e.Id,e.Type,e.sId,e.tId),i=void 0,n=void 0;this.$refs.diagramUI.snapBlocks.forEach(function(t){t.block.Id===e.sId&&(i=t),t.block.Id===e.tId&&(n=t)}),this.currentDiagram.links.push(t),this.$refs.diagramUI.drawNewLink(e.Type,e.Id,i,n),this.$refs.sidePanel.clear(),this.newLinkProperties=null,null!=e.version&&(this.versionNo=e.version)}},changeSelected:function(e){this.selectedBlockView=e},changeSelectedLink:function(e){null!==this.selectedLink&&this.selectedLink.changeColor("black"),this.selectedLink=e,null!==e&&e.changeColor("blue")},changeFields:function(e){var t,i,n;this.selectedBlockView.removeLinkPoints(),this.selectedBlockView.block.title!==e.title&&(t=this.selectedBlockView.block.Id,i=e.title,n={Id:t,title:i},console.log("Title property to update: ",n),I.emit("updateBlockProperties",n),this.selectedBlockView.block.title=e.title),this.selectedBlockView.block.description!==e.description&&(!function(e,t){var i={Id:e,description:t};console.log("Description property to update: ",i),I.emit("updateBlockProperties",i)}(this.selectedBlockView.block.Id,e.description),this.selectedBlockView.block.description=e.description),console.log("New add fields",e.additionalFields),_(this.selectedBlockView.block.Id,e.additionalFields),this.selectedBlockView.block.additionalFields=e.additionalFields,this.$refs.diagramUI.changeFields()},updateAdditionalFields:function(e){this.selectedBlockView.removeLinkPoints(),this.selectedBlockView.block.additionalFields=e,_(this.selectedBlockView.block.Id,this.selectedBlockView.block.additionalFields),this.$refs.diagramUI.changeFields()}},computed:{supportedBlocks:function(){var e=this,t=[];if("free"===this.currentDiagram.mode.toLowerCase()){var i=we.filter(function(e){return"free"===e.type})[0];console.log(i),t=i.blocks}else{var n=we.filter(function(t){return t.type===e.currentDiagram.Type.toLowerCase()})[0];void 0===n?console.log("Unsupported schema: "+this.currentDiagram.Type.toLowerCase()):(console.log(n),t=n.blocks)}return t},supportedLinks:function(){var e=this,t=[];if("free"===this.currentDiagram.mode.toLowerCase()){var i=we.filter(function(e){return"free"===e.type})[0];console.log(i),t=i.links}else{var n=we.filter(function(t){return t.type===e.currentDiagram.Type.toLowerCase()})[0];void 0===n?console.log("Unsupported schema: "+this.currentDiagram.Type.toLowerCase()):(console.log(n),t=n.links)}return t}}},xe={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{display:"flex","flex-direction":"row","margin-top":"20px"}},[e.showDiagramWindow?i("diagram-ui",{key:e.keyOfDiagramUI,ref:"diagramUI",attrs:{currentDiagram:this.currentDiagram},on:{"ready-add-new-link":e.addNewLink,"block-view-selected":e.changeSelected,"link-selected":e.changeSelectedLink,"turn-off-link-mode":e.turnOffLinkMode}}):e._e(),e._v(" "),i("div",{staticStyle:{display:"flex","flex-direction":"column"}},[i("side-panel",{ref:"sidePanel",attrs:{"is-link-add-mode":e.isLinkAddMode,"supported-block-types":e.supportedBlocks,"supported-link-types":e.supportedLinks},on:{"create-block":e.addNewBlock,"toggle-link-mode":e.toggleLinkMode}}),e._v(" "),null==e.selectedBlockView&&null==e.selectedLink||!1!==e.isLinkAddMode?e._e():i("editing-panel",{attrs:{"selected-block-view":e.selectedBlockView,"selected-link":e.selectedLink},on:{"close-panel":function(t){e.selectedBlockView.removeLinkPoints(),e.selectedBlockView=null},"apply-changes":e.changeFields,"item-deleted":e.updateAdditionalFields,"delete-block":e.deleteBlockFromSnap,"delete-link":e.deleteLinkFromSnap}})],1)],1)},staticRenderFns:[]};var _e={name:"App",components:{"diagram-controller":i("VU/8")(Ie,xe,!1,function(e){i("i6Yc")},"data-v-31024ae0",null).exports},data:function(){return{projects:[],newName:"",newDescription:"",newDiagramType:"Use-case",newDiagramMode:"Free",currentProject:null,currentDiagram:null,showCreateNewProjectDialog:!1,showCreateNewDiagramDialog:!1,state:"project navigator"}},mounted:function(){var e;w=0,console.log("User id = ",w),this.projects=(e=[],b.get(y+"getProjectList").then(function(t){t.data.forEach(function(t){e.push(new m(t.Id,t.name,t.description))})}),e)},methods:{addProject:function(){var e=this;(function(e){return b.post(y+"createNewProject",e).then(function(e){return e.data.pId})})({name:this.newName,description:this.newDescription}).then(function(t){console.log("New project ID:",t);var i=new m(t,e.newName,e.newDescription);e.projects=[].concat(s()(e.projects),[i]),e.showCreateNewProjectDialog=!1,e.showProject(i)})},openProject:function(e){var t,i;this.showProject(e),this.currentProject.diagrams=(t=e.Id,i=[],b.get(y+"getDiagrams",{params:{Id:t}}).then(function(e){e.data.forEach(function(e){i.push(new f(e.Id,e.name,e.description,e.Type,e.mode))})}),i)},showProject:function(e){this.currentProject=e,this.state="diagram navigator",this.newName="",this.newDescription=""},addDiagram:function(){var e=this;(function(e){return console.log("New diagram properties: ",e),b.post(y+"createNewDiagram",e).then(function(e){return e.data.dId})})({pId:this.currentProject.Id,name:this.newName,description:this.newDescription,Type:this.newDiagramType,mode:this.newDiagramMode}).then(function(t){var i=new f(t,e.newName,e.newDescription,e.newDiagramType,e.newDiagramMode);e.currentProject.diagrams=[].concat(s()(e.currentProject.diagrams),[i]),e.showCreateNewDiagramDialog=!1,e.showDiagram(i)})},openDiagram:function(e){this.showDiagram(e)},showDiagram:function(e){this.currentDiagram=e,this.state="diagram editor",this.newName="",this.newDescription=""},goHome:function(){this.state="project navigator",this.currentDiagram=null,this.currentProject=null},clear:function(){this.newName="",this.newDescription="",this.newDiagramType="use-case",this.newDiagramMode="free"}}},Ce={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",{staticClass:"navbar"},[i("button",{staticClass:"btn btn-1",on:{click:function(t){return e.goHome()}}},[e._v("\n      Home\n    ")]),e._v(" "),"project navigator"===e.state?i("h1",[e._v("Project navigator")]):"diagram navigator"===e.state?i("h1",[e._v('Project "'+e._s(e.currentProject.name)+'"')]):"diagram editor"===e.state?i("h1",[e._v('Diagram "'+e._s(e.currentDiagram.name)+'"')]):e._e(),e._v(" "),"project navigator"===e.state?i("button",{staticClass:"btn btn-1 btn-sep icon-plus",on:{click:function(t){e.showCreateNewProjectDialog=!0}}},[e._v("\n      Create new project\n    ")]):e._e(),e._v(" "),"diagram navigator"===e.state?i("button",{staticClass:"btn btn-1 btn-sep icon-plus",on:{click:function(t){e.showCreateNewDiagramDialog=!0}}},[e._v("\n      Create new diagram\n    ")]):e._e()]),e._v(" "),"project navigator"===e.state?i("div",{staticClass:"projectTable"},e._l(e.projects,function(t){return i("div",{key:t.Id,staticClass:"column"},[i("div",{staticClass:"card",on:{click:function(i){return e.openProject(t)}}},[i("p",[i("b",[e._v("Name:")]),e._v(" "+e._s(t.name))]),e._v(" "),i("p",[i("b",[e._v("Description:")]),e._v(" "+e._s(t.description))])])])}),0):"diagram navigator"===e.state?i("div",{staticClass:"projectTable"},e._l(e.currentProject.diagrams,function(t){return i("div",{key:t.Id,staticClass:"column"},[i("div",{staticClass:"card",on:{click:function(i){return e.openDiagram(t)}}},[i("p",[i("b",[e._v("Name:")]),e._v(" "+e._s(t.name))]),e._v(" "),i("p",[i("b",[e._v("Description:")]),e._v(" "+e._s(t.description))]),e._v(" "),i("p",[i("b",[e._v("Type:")]),e._v(" "+e._s(t.Type)+" diagram")]),e._v(" "),i("p",[i("b",[e._v("Mode:")]),e._v(" "+e._s(t.mode))])])])}),0):"diagram editor"===e.state?i("div",{staticClass:"diagramEditor"},[i("diagram-controller",{attrs:{"current-diagram":e.currentDiagram}})],1):e._e(),e._v(" "),e.showCreateNewProjectDialog?i("div",{staticClass:"newProjectModal",attrs:{id:"id01"}},[i("form",{staticClass:"newProjectModal-content"},[i("div",{staticClass:"formHeader"},[i("h1",[e._v("Create new project")]),e._v(" "),i("span",{staticClass:"closeForm",attrs:{title:"Close form"},on:{click:function(t){e.showCreateNewProjectDialog=!1}}},[e._v("X")])]),e._v(" "),i("hr"),e._v(" "),i("div",{staticClass:"newProjectForm"},[e._m(0),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{id:"NameProj",type:"text",placeholder:"Enter project name",name:"name",required:""},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}}),e._v(" "),e._m(1),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newDescription,expression:"newDescription"}],attrs:{id:"DescriptionProj",type:"text",placeholder:"Enter project description",name:"description"},domProps:{value:e.newDescription},on:{input:function(t){t.target.composing||(e.newDescription=t.target.value)}}}),e._v(" "),i("div",{staticClass:"newProjectButtons"},[i("button",{staticClass:"cancelbtn",attrs:{type:"button"},on:{click:function(t){e.showCreateNewProjectDialog=!1}}},[e._v("\n            Cancel\n          ")]),e._v(" "),i("button",{staticClass:"signupbtn",attrs:{type:"button"},on:{click:function(t){return e.addProject()}}},[e._v("Create")])])])])]):e._e(),e._v(" "),e.showCreateNewDiagramDialog?i("div",{staticClass:"newProjectModal"},[i("form",{staticClass:"newProjectModal-content"},[i("div",{staticClass:"formHeader"},[i("h1",[e._v("Create new diagram")]),e._v(" "),i("span",{staticClass:"closeForm",attrs:{title:"Close form"},on:{click:function(t){e.showCreateNewDiagramDialog=!1}}},[e._v("X")])]),e._v(" "),i("hr"),e._v(" "),i("div",{staticClass:"newProjectForm"},[e._m(2),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newName,expression:"newName"}],attrs:{id:"Name",type:"text",placeholder:"Enter diagram name",name:"name",required:""},domProps:{value:e.newName},on:{input:function(t){t.target.composing||(e.newName=t.target.value)}}}),e._v(" "),e._m(3),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.newDescription,expression:"newDescription"}],attrs:{id:"Description",type:"text",placeholder:"Enter diagram description",name:"description"},domProps:{value:e.newDescription},on:{input:function(t){t.target.composing||(e.newDescription=t.target.value)}}}),e._v(" "),i("div",{staticStyle:{display:"flex","flex-direction":"row","margin-top":"20px"}},[i("div",[e._m(4),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.newDiagramMode,expression:"newDiagramMode"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.newDiagramMode=t.target.multiple?i:i[0]}}},[i("option",[e._v("Strict")]),e._v(" "),i("option",[e._v("Free")])])]),e._v(" "),i("div",[e._m(5),e._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:e.newDiagramType,expression:"newDiagramType"}],on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.newDiagramType=t.target.multiple?i:i[0]}}},[i("option",[e._v("Use-case")]),e._v(" "),i("option",[e._v("Class")])])])]),e._v(" "),i("div",{staticClass:"newProjectButtons"},[i("button",{staticClass:"cancelbtn",attrs:{type:"button"},on:{click:function(t){e.showCreateNewDiagramDialog=!1}}},[e._v("\n            Cancel\n          ")]),e._v(" "),i("button",{staticClass:"signupbtn",attrs:{type:"button"},on:{click:function(t){return e.addDiagram()}}},[e._v("Create")])])])])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"NameProj"}},[t("b",[this._v("Name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"DescriptionProj"}},[t("b",[this._v("Description")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"Name"}},[t("b",[this._v("Name")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",{attrs:{for:"Description"}},[t("b",[this._v("Description")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",[t("b",[this._v("Diagram mode")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("label",[t("b",[this._v("Diagram type")])])}]};var De=i("VU/8")(_e,Ce,!1,function(e){i("JVK8")},null,null).exports,Be=i("/ocq");n.a.use(Be.a);var Pe=new Be.a({routes:[]});n.a.config.productionTip=!1,new n.a({el:"#app",router:Pe,components:{App:De},template:"<App/>"})},PPhy:function(e,t){e.exports=[{type:"free",blocks:["Class","Use-case","Actor"],links:["Association","Association(Bidirectional)","Dependency"]},{type:"use-case",blocks:["Use-case","Actor"],links:["Association","Association(Bidirectional)","Dependency"]},{type:"class",blocks:["Class"],links:["Association","Association(Bidirectional)","Dependency"]}]},"Q+xS":function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSJ3aGl0ZSIvPgo8Y2lyY2xlIGN4PSI0MC41IiBjeT0iNDAuNSIgcj0iMjciIGZpbGw9IiM2MEVGRkYiIHN0cm9rZT0iYmxhY2siLz4KPGxpbmUgeTE9IjY3LjUiIHgyPSI4MCIgeTI9IjY3LjUiIHN0cm9rZT0iYmxhY2siLz4KPC9zdmc+Cg=="},VMuj:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSJ3aGl0ZSIvPgo8Y2lyY2xlIGN4PSI0MCIgY3k9IjQwIiByPSIzNC41IiBmaWxsPSIjNjBFRkZGIiBzdHJva2U9ImJsYWNrIi8+CjxsaW5lIHgxPSI0MC4yNSIgeTE9IjUuNTY2OTkiIHgyPSI0OS42MTc1IiB5Mj0iMTAuOTc1MyIgc3Ryb2tlPSJibGFjayIvPgo8bGluZSB4MT0iMzkuODcwNiIgeTE9IjUuMzE2NTkiIHgyPSI1MC4zMTg3IiB5Mj0iMi41MTcwMyIgc3Ryb2tlPSJibGFjayIvPgo8L3N2Zz4K"},bRsR:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSJ3aGl0ZSIvPgo8bGluZSB4MT0iNy41IiB5MT0iMjUiIHgyPSI3LjUiIHkyPSI1NSIgc3Ryb2tlPSJibGFjayIvPgo8bGluZSB4MT0iNyIgeTE9IjM5LjUiIHgyPSI0NSIgeTI9IjM5LjUiIHN0cm9rZT0iYmxhY2siLz4KPGNpcmNsZSBjeD0iNjAiIGN5PSI0MCIgcj0iMTQuNSIgZmlsbD0iIzYwRUZGRiIgc3Ryb2tlPSJibGFjayIvPgo8L3N2Zz4K"},"dZ/2":function(e,t){},daKz:function(e,t){e.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yXzIpIj4NCjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgZmlsbD0id2hpdGUiLz4NCjxjaXJjbGUgY3g9IjM5LjUiIGN5PSIxNC41IiByPSIxNC4yNSIgZmlsbD0iIzYwRUZGRiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCjxsaW5lIHgxPSIzOS41IiB5MT0iMjkiIHgyPSIzOS41IiB5Mj0iNjEiIHN0cm9rZT0iYmxhY2siLz4NCjxsaW5lIHgxPSIzOS4zNzQiIHkxPSI2MC4zMTIiIHgyPSIyMy4zOTA3IiB5Mj0iODAuMzI2MSIgc3Ryb2tlPSJibGFjayIvPg0KPGxpbmUgeDE9IjU3LjA5MDMiIHkxPSI3OS45NTMyIiB4Mj0iMzkuNjI2NSIgeTI9IjYwLjMzMjQiIHN0cm9rZT0iYmxhY2siLz4NCjxsaW5lIHgxPSIxNiIgeTE9IjM2LjUiIHgyPSI2MyIgeTI9IjM2LjUiIHN0cm9rZT0iYmxhY2siLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMF8yXzIiPg0KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSJ3aGl0ZSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K"},gxDI:function(e,t,i){"use strict";function n(e){if(e)return function(e){for(var t in n.prototype)e[t]=n.prototype[t];return e}(e)}t.a=n,n.prototype.on=n.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},n.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0;o<n.length;o++)if((i=n[o])===t||i.fn===t){n.splice(o,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},n.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(i){n=0;for(var o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,t)}return this},n.prototype.emitReserved=n.prototype.emit,n.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},n.prototype.hasListeners=function(e){return!!this.listeners(e).length}},i6Yc:function(e,t){},iWbR:function(e,t){},rLMc:function(e,t,i){var n={"./actor.svg":"daKz","./blockTypes":"Gfgk","./blockTypes.json":"Gfgk","./boundary.svg":"bRsR","./controller.svg":"VMuj","./diagramTypes":"PPhy","./diagramTypes.json":"PPhy","./entity.svg":"Q+xS"};function o(e){return i(s(e))}function s(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}o.keys=function(){return Object.keys(n)},o.resolve=s,e.exports=o,o.id="rLMc"}},["NHnr"]);
//# sourceMappingURL=app.dfa9bdd83eb4c343a82a.js.map