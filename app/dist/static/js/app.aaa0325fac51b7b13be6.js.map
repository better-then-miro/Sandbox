{"version":3,"sources":["webpack:///./src/boundary/SnapUtils/assets/blockTypes.json","webpack:///./src/entity/diagram.js","webpack:///./src/entity/project.js","webpack:///./src/boundary/serverProtocol.js","webpack:///./src/boundary/DiagramUI/drag.js","webpack:///./src/boundary/SnapUtils/svgBlockFactory.js","webpack:///./src/boundary/SnapUtils/blockView.js","webpack:///./src/boundary/DiagramUI/scale.js","webpack:///./src/boundary/SnapUtils/connection.js","webpack:///src/boundary/DiagramUI/DiagramUI.vue","webpack:///./src/boundary/DiagramUI/DiagramUI.vue?146d","webpack:///./src/boundary/DiagramUI/DiagramUI.vue","webpack:///src/boundary/SidePanel/SelectionEntry.vue","webpack:///./src/boundary/SidePanel/SelectionEntry.vue?e112","webpack:///./src/boundary/SidePanel/SelectionEntry.vue","webpack:///src/boundary/SidePanel/SidePanel.vue","webpack:///./src/boundary/SidePanel/SidePanel.vue?f1d0","webpack:///./src/boundary/SidePanel/SidePanel.vue","webpack:///src/boundary/EditingPanel.vue","webpack:///./src/boundary/EditingPanel.vue?8f0d","webpack:///./src/boundary/EditingPanel.vue","webpack:///./src/entity/block.js","webpack:///./src/entity/link.js","webpack:///src/controller/DiagramController.vue","webpack:///./src/controller/DiagramController.vue?7cf3","webpack:///./src/controller/DiagramController.vue","webpack:///src/App.vue","webpack:///./src/App.vue?e1f6","webpack:///./src/App.vue","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/boundary/SnapUtils/assets/diagramTypes.json","webpack:///./src/boundary/SnapUtils/assets/actor.svg","webpack:///./node_modules/@socket.io/component-emitter/index.mjs","webpack:///./src/boundary/SnapUtils/assets ^\\.\\/.*$"],"names":["module","exports","name","elements","shape","height","textFieldsCnts","textFieldsNames","shape-svg","Diagram","Id","description","Type","mode","arguments","length","undefined","blocks","links","classCallCheck_default","this","Object","defineProperty","writable","Project","diagrams","ServerUrl","axios","require","uId","socket","updateBlockPositionProperties","width","coords","properties","console","log","emit","updateBlockAdditionalProperties","additionalFields","getDiagramContent","diagramId","callback","on","_ref","createNewBlock","asyncToGenerator_default","regenerator_default","a","mark","_callee","wrap","_context","prev","next","response","code","stop","_x","apply","boundsToDrag","x1","y1","x2","y2","dragMove","dx","dy","x","y","data","isScaling","attr","transform","i","connections","snap","connection","Math","abs","dragStart","removeLinkPoints","local","dragStop","block","keys_default","remove","newCoords","getBBox","round","setCoords","thisBlock","redrawOnSnap","SvgBlockFactory","w","h","color","stroke","svgPrimitive_Rectangle","svgPrimitive_Ellipse","svgCreate_Actor","filename","g","group","icon","Snap","load","append","t","Matrix","scale","translate","fig","rect","fill","strokeWidth","_len","figures","Array","_key","add","x_center","y_center","title","text","dominantBaseline","textAnchor","fields","titleOffset","key","font-size","values","keyTitle","valueIndex","valueTitle","mydata_resultingOffset","type","svgCreate_ClassBlock","ellipse","actorIcon","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","get_iterator_default","entries_default","done","value","_ref2","slicedToArray_default","err","return","templates","BlockView","factory","blockGroup","_this","template","stereotype","filter","elem","constructSVGBlock","drag","dblclick","turnOnscaleMode","click","select","_factory","fixedHeightSum","fixedHeightNum","element","svgParts","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","_factory2","currentElementHeight","svgPrimitive","svgPrimitive_forName","svgPrimitive_fromFile","svgTexts","verticalOffset","currName","bottom_center","push","svgCreate_Titile","result","svgCreate_TextFields","svgTextsGroup","svgConstruct","svgElementGroup","_this2","bbox","points","forEach","point","snapPoint","circle","scalingBlockGroup","lastModifiedGroup","lastScaleX","lastScaleY","scaleStart","scaleMove","groupBox","scaleX","scaleY","scaleStop","updateBlockPosition","setWidth","setHeight","groupBbox","anchors","class","sel","prototype","isPrototypeOf","drawLinkPoints","selLink","selectLink","setBlockToNull","setLinkToNull","plugin","Element","Paper","changeColor","line","bg","arrow","firstBlockView","secondBlockView","lId","linkType","from","to","bb1","bb2","offset","p","d","dis","res","j","min","x4","y4","max","path","toFixed","join","arrowPointsStr","returnObj","polyline","split","stroke-width","stroke-dasharray","stroke-dashoffset","lineObject","DiagramUI","props","currentDiagram","entity_diagram","emits","ready-add-new-link","sourceID","Number","targetID","block-view-selected","SnapUtils_blockView","link-selected","turn-off-link-mode","selectedBlockView","selectedLink","snapBlocks","snapLinks","linkSourceBlock","isLinkAddMode","mounted","snap_svg_cjs_default","init","methods","bcr","$refs","canvas","getBoundingClientRect","viewBox","blockView","link","sBlockView","sId","tBlockView","tId","newLink","drawNewBlock","newBlock","updateInfo","$emit","drawNewLink","linkId","toggleLinkMode","bool","changeFields","DiagramUI_DiagramUI","render","_h","$createElement","_self","_c","ref","staticClass","attrs","id","staticRenderFns","boundary_DiagramUI_DiagramUI","__webpack_require__","normalizeComponent","ssrContext","SelectionEntry","objectType","String","isBlock","Boolean","selectedEntry","entry-selected","svgBlockFactory","svgCreate_byType","computed","isSelected","SidePanel_SelectionEntry","_vm","selected","staticStyle","display","flex-direction","border","_e","_v","_s","SidePanel","components","SelectionEntry_normalizeComponent","supportedBlockTypes","supportedLinkTypes","toggle-link-mode","create-block","blockTitle","blockType","addNewBlock","newTitle","replaceAll","clear","changeSelected","params","SidePanel_SidePanel","directives","rawName","expression","placeholder","domProps","input","$event","target","composing","_l","object-type","is-block","selected-entry","boundary_SidePanel_SidePanel","SidePanel_normalizeComponent","EditingPanel","close-panel","apply-changes","item-deleted","delete-block","blockToDelete","delete-link","selectedStereotype","updateStereotypySelection","updated","close","currentOption","option","values_default","selectStereotype","newItemKey","newAdditionFieldsDict","oldKeys","attributeKey","additionalFieldsSection","querySelectorAll","fieldInput","blockDescription","addNewItem","itemType","deleteItem","attributeValue","deleteBlock","deleteLink","boundary_EditingPanel","margin-top","margin-bottom","padding-left","padding-top","keys","refInFor","change","$$selectedVal","call","options","o","map","_value","multiple","align-items","role","margin-left","background","src_boundary_EditingPanel","EditingPanel_normalizeComponent","Block","Attributes","Operations","attrContent","methodContent","Link","sorceId","targetId","diagramTypes","DiagramController","DiagramUi","showDiagramWindow","keyOfDiagramUI","newBlockProperties","newLinkProperties","versionNo","openSocket","loadDiagramContent","blockModifierCallback","registerDeleteBlockCallback","blockDeleteCallback","registerDeleteLinkCallback","deleteLinkCallback","registerAddNewLinkCallback","addNewLinkHandler","registerAddNewBlockCallback","addNewBlockHandler","version","diagramUI","setTitle","setDescription","setAdditionalFields","bId","blockId","linksToRemove","fromBlockID","toBlockID","deleteLinkFromSnap","index","indexOf","splice","linkToDelete","entity_block","entity_link","dId","blockData","deleteFromServer","deleteBlockFromSnap","parameters","redrawDiagramUI","turnOffLinkMode","addNewLink","sidePanel","createNewLink","linkData","sourceView","targetView","changeSelectedLink","updateBlockDescriptionProperty","updateAdditionalFields","supportedBlocks","_this3","toLowerCase","diagramType","_diagramType","supportedLinks","_this4","_diagramType2","controller_DiagramController","is-link-add-mode","supported-block-types","supported-link-types","selected-block-view","selected-link","App","diagram-controller","DiagramController_normalizeComponent","projects","newName","newDescription","newDiagramType","newDiagramMode","currentProject","showCreateNewProjectDialog","showCreateNewDiagramDialog","state","get","then","project","addProject","post","pId","createNewProject","newProject","entity_project","concat","toConsumableArray_default","showProject","openProject","diagram","addDiagram","createNewDiagram","newDiagram","showDiagram","openDiagram","goHome","selectortype_template_index_0_src_App","current-diagram","_m","required","for","src_App","App_normalizeComponent","Vue","use","Router","router","routes","config","productionTip","el","Emitter","obj","mixin","__webpack_exports__","addEventListener","event","fn","_callbacks","once","off","removeListener","removeAllListeners","removeEventListener","cb","callbacks","args","len","slice","emitReserved","listeners","hasListeners","./actor.svg","./blockTypes","./blockTypes.json","./diagramTypes","./diagramTypes.json","webpackContext","req","webpackContextResolve","Error","resolve"],"mappings":"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","file":"static/js/app.aaa0325fac51b7b13be6.js","sourcesContent":["module.exports = [{\"name\":\"Class-default\",\"elements\":[{\"shape\":\"rect\",\"height\":30,\"textFieldsCnts\":[1],\"textFieldsNames\":[\"<title>\"]},{\"shape\":\"rect\",\"textFieldsCnts\":[\"*\"],\"textFieldsNames\":[\"Attributes\"]},{\"shape\":\"rect\",\"textFieldsCnts\":[\"*\"],\"textFieldsNames\":[\"Operations\"]}]},{\"name\":\"Use-case\",\"elements\":[{\"shape\":\"ellipse\",\"textFieldsCnts\":[1],\"textFieldsNames\":[\"<title>\"]}]},{\"name\":\"Actor\",\"elements\":[{\"shape-svg\":\"actor.svg\",\"textFieldsCnts\":[1],\"textFieldsNames\":[\"<title>\"]}]}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/SnapUtils/assets/blockTypes.json\n// module id = Gfgk\n// module chunks = 1","export default class Diagram {\r\n  Id = null;\r\n  name = '';\r\n  description = '';\r\n  Type = '';\r\n  mode = '';\r\n  blocks = [];\r\n  links = [];\r\n  constructor(Id, name, description, Type, mode = 'free', blocks = [], links = []) {\r\n    this.Id = Id;\r\n    Object.defineProperty(this, 'Id', { writable: false }); // readonly ID\r\n    this.name = name;\r\n    this.description = description;\r\n    this.Type = Type;\r\n    this.mode = mode;\r\n    this.blocks = blocks;\r\n    this.links = links;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity/diagram.js","export default class Project {\n  Id = null;\n  name = '';\n  description = '';\n  diagrams = [];\n  constructor(Id, name, description, diagrams = []) {\n    this.name = name;\n    this.description = description;\n    this.Id = Id;\n    Object.defineProperty(this, 'Id', { writable: false }); // readonly ID\n    this.diagrams = diagrams;\n  }\n  // TODO do we need _prop with getters/setters ?\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity/project.js","/* eslint-disable no-console */\n\nimport openSocket from 'socket.io-client';\nimport Diagram from '../entity/diagram';\nimport Project from '../entity/project';\n\nconst ServerUrl = 'http://127.0.0.1:5000/';\nconst axios = require('axios');\n\nlet uId;\nlet socket;\nexport function initSocketIo() {\n  socket = openSocket(`${ServerUrl}main`);\n}\n\nexport function loadDiagramsFromServer(pId) {\n  const diagrams = [];\n  axios.get(`${ServerUrl}getDiagrams`, { params: { Id: pId } })\n    .then((response) => {\n      const data = response.data;\n      data.forEach((diagram) => {\n        diagrams.push(\n          // TODO mode support on server side\n          new Diagram(diagram.Id, diagram.name, diagram.description, diagram.Type, diagram.mode),\n        );\n      });\n    });\n  return diagrams;\n}\n\nexport function loadProjectsFromServer() {\n  const projects = [];\n  axios.get(`${ServerUrl}getProjectList`)\n    .then((response) => {\n      const data = response.data;\n      data.forEach((project) => {\n        projects.push(new Project(project.Id, project.name, project.description));\n      });\n    });\n  return projects;\n}\n\nexport function registerUserOnServer() {\n  // axios.get(`${ServerUrl}registerUser`)\n  //   .then((response) => {\n  //     const data = response.data;\n  //     uId = data.uId;\n  //     console.log('User id = ', uId);\n  //   });\n  uId = 0;\n  console.log('User id = ', uId);\n}\n\nexport function registerModifierCallback(callback) {\n  socket.on('updatePropertiesHandler', (response) => {\n    if (response.code === 200) {\n      console.log('New properties arrived!');\n      callback(response);\n    } else {\n      console.log('Error occurred in updatePropertiesHandler, error code: ', response.code);\n    }\n  });\n}\n\nexport function registerAddNewLinkCallback(callback) {\n  socket.on('spawnNewLinkHandler', (response) => {\n    callback(response);\n  });\n}\n\nexport function registerAddNewBlockCallback(callback) {\n  socket.on('spawnNewBlockHandler', (response) => {\n    callback(response);\n  });\n}\n\n\nexport function registerDeleteBlockCallback(callback) {\n  socket.on('deleteBlockHandler', (response) => {\n    if (response.code === 200) {\n      console.log('Delete block arrived!');\n      callback(response);\n    }\n  });\n}\n\nexport function registerDeleteLinkCallback(callback) {\n  socket.on('deleteLinkHandler', (response) => {\n    if (response.code === 200) {\n      console.log('Delete link arrived!');\n      callback(response);\n    }\n  });\n}\n\nexport function updateBlockTitleProperty(Id, title) {\n  const properties = {\n    Id,\n    title,\n  };\n  console.log('Title property to update: ', properties);\n  socket.emit('updateBlockProperties', properties);\n}\n\nexport function updateBlockDescriptionProperty(Id, description) {\n  const properties = {\n    Id,\n    description,\n  };\n  console.log('Description property to update: ', properties);\n  socket.emit('updateBlockProperties', properties);\n}\n\nexport function updateBlockPositionProperties(Id, width, height, coords) {\n  const properties = {\n    Id,\n    width,\n    height,\n    coords,\n  };\n  console.log('Position properties to update: ', properties);\n  socket.emit('updateBlockProperties', properties);\n}\n\nexport function updateBlockAdditionalProperties(Id, additionalFields) {\n  const properties = {\n    Id,\n    additionalFields,\n  };\n  console.log('Additional properties to update: ', properties);\n  socket.emit('updateBlockProperties', properties);\n}\n\nexport function getDiagramContent(diagramId, callback) {\n  console.log('Requesting content of diagram: ', diagramId);\n  socket.emit('getDiagramContent', { Id: diagramId });\n  socket.on('getDiagramContentHandler', callback);\n}\n\nexport function createNewProject(properties) {\n  return axios.post(`${ServerUrl}createNewProject`, properties)\n    .then(response => response.data.pId);\n}\n\nexport function createNewDiagram(properties) {\n  console.log('New diagram properties: ', properties);\n  return axios.post(`${ServerUrl}createNewDiagram`, properties)\n    .then(response => response.data.dId);\n}\n\nexport async function createNewBlock(properties) {\n  console.log('New block properties: ', properties);\n\n  socket.on('createNewBlockHandler', (response) => {\n    if (response.code === 200) {\n      console.log('Server accepted block creation request');\n    } else {\n      console.log('Error occurred when creating block, error code: ', response.code);\n    }\n  });\n  socket.emit('createNewBlock', properties);\n}\n\nexport function createNewLink(properties) {\n  console.log('New link properties: ', properties);\n  socket.on('createNewLinkHandler', (response) => {\n    if (response.code === 200) {\n      console.log('Server accepted link creation request');\n    } else {\n      console.log('Error occurred when creating link, error code: ', response.code);\n    }\n  });\n  socket.emit('createNewLink', properties);\n}\n\nexport function deleteLink(linkId) {\n  console.log('Deleting link: ', linkId);\n  // socket.on('deleteLinkHandler', (response) => {\n  //   if (response.code !== 200) {\n  //     console.log('Error occurred when deleting link, error code: ', response.code);\n  //   }\n  // });\n  socket.emit('deleteLink', { Id: linkId });\n}\n\nexport function deleteBlock(blockId) {\n  console.log('Deleting block: ', blockId);\n  socket.on('deleteBlockHandler', (response) => {\n    if (response.code !== 200) {\n      console.log('Error occurred when deleting block, error code: ', response.code);\n    }\n  });\n  socket.emit('deleteBlock', { Id: blockId });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/boundary/serverProtocol.js","/* eslint-disable func-names */\r\n\r\nimport { updateBlockPositionProperties } from '../serverProtocol';\r\n\r\nlet boundsToDrag = { x1: 0, y1: 0, x2: 0, y2: 0 };\r\nexport const setBounds = (x1, y1, x2, y2) => {\r\n  boundsToDrag = { x1, y1, x2, y2 };\r\n};\r\n\r\nexport const dragMove = function (dx, dy, x, y) {\r\n  if (this.data('blockView').isScaling === false) {\r\n    if (x >= boundsToDrag.x1 && y >= boundsToDrag.y1 &&\r\n      x <= boundsToDrag.x2 && y <= boundsToDrag.y2) {\r\n      this.attr({\r\n        transform: this.data('ot') + (this.data('ot') ? 'T' : 't') + [dx, dy],\r\n      });\r\n\r\n      // eslint-disable-next-line no-plusplus\r\n      for (let i = this.data('blockView').connections.length; i--;) {\r\n        this.data('blockView').snap.connection(this.data('blockView').connections[i]);\r\n      }\r\n    }\r\n\r\n    if (Math.abs(dx) > 2 || Math.abs(dy) > 2) {\r\n      this.data('saveDrag', true);\r\n    }\r\n  }\r\n};\r\n\r\nexport const dragStart = function () {\r\n  this.data('blockView').removeLinkPoints();\r\n  this.data('ot', this.transform().local);\r\n  this.data('saveDrag', false);\r\n};\r\n\r\nexport const dragStop = function () {\r\n  if (this.data('saveDrag') === false) {\r\n    return;\r\n  }\r\n\r\n  if (this.data('blockView').block.additionalFields &&\r\n    Object.keys(this.data('blockView').block.additionalFields).length > 0) {\r\n    //  this -    ,    ?,\r\n    //        \r\n    //        \r\n    this[0][1].remove();\r\n    this[1][1].remove();\r\n    //   ,     \r\n    // [ ][   ],\r\n    //       ,  \r\n  }\r\n\r\n  const coords = this.getBBox();\r\n\r\n  let newCoords = [];\r\n  newCoords = [Math.round(coords.x), Math.round(coords.y)];\r\n\r\n  this.data('blockView').block.setCoords(newCoords);\r\n\r\n  const thisBlock = this.data('blockView').block;\r\n  updateBlockPositionProperties(thisBlock.Id, thisBlock.width,\r\n    thisBlock.height, thisBlock.coords);\r\n\r\n  this.data('blockView').redrawOnSnap();\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/boundary/DiagramUI/drag.js","/* eslint-disable guard-for-in */\r\n/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable no-console */\r\nimport Snap from 'snapsvg-cjs';\r\nimport actorIcon from './assets/actor.svg';\r\n\r\nconst bgColor = '#60efff';\r\n\r\nexport default class SvgBlockFactory {\r\n  snap = null;\r\n  constructor(snap) {\r\n    this.snap = snap;\r\n  }\r\n\r\n  svgPrimitive_forName(name, x, y, w, h, color = bgColor, stroke = 'black') {\r\n    switch (name) {\r\n      case 'rect':\r\n        return this.svgPrimitive_Rectangle(x, y, w, h, color, stroke);\r\n      case 'ellipse':\r\n        return this.svgPrimitive_Ellipse(x, y, w, h);\r\n      case 'actor':\r\n        return this.svgCreate_Actor(x, y, w, h);\r\n      default :\r\n        console.log('Don`t know such primitive');\r\n        return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load svg figure as primitive (svg figure should have size 80x80)\r\n   */\r\n  svgPrimitive_fromFile(filename, x, y, w, h) {\r\n    const g = this.snap.group();\r\n    // eslint-disable-next-line global-require,import/no-dynamic-require\r\n    const icon = require(`./assets/${filename}`);\r\n    g.data('ot', g.transform().local);\r\n    // TODO Fix it... icon loads but too late\r\n    Snap.load(icon, (data) => {\r\n      g.append(data);\r\n    });\r\n\r\n    const t = new Snap.Matrix();\r\n    t.scale(w / 80, h / 80, x, y); // scale object\r\n    t.translate(x, y);\r\n    g.transform(t); // apply transformation to object\r\n\r\n    return g;\r\n  }\r\n\r\n  svgPrimitive_Rectangle(x, y, w, h, color = bgColor, stroke = 'black') {\r\n    const fig = this.snap.rect(x, y, w, h);\r\n    fig.attr({ fill: color, stroke, strokeWidth: 1 });\r\n    return fig;\r\n  }\r\n\r\n  svgConstruct(...figures) {\r\n    const g = this.snap.group();\r\n    g.add(figures);\r\n    return g;\r\n  }\r\n\r\n  /*svgConstructFromArr(figures) {\r\n    const g = this.snap.group();\r\n    g.add(figures);\r\n    return g;\r\n  }*/\r\n\r\n  svgCreate_Titile(x_center, y_center, title) {\r\n    return this.snap.text(\r\n      x_center,\r\n      y_center,\r\n      title,\r\n    ).attr({ stroke: 'black', dominantBaseline: 'middle', textAnchor: 'middle' });\r\n  }\r\n\r\n  svgCreate_TextFields(x, y, w, fields) {\r\n    let titleOffset = 15;\r\n    const g = this.snap.group();\r\n    g.attr({ 'font-size': '13px' });\r\n    for (const key in fields) {\r\n      const values = fields[key];\r\n      if (values === undefined) {\r\n        continue;\r\n      }\r\n\r\n      const keyTitle = this.snap.text(\r\n        x + Math.round(w / 2),\r\n        y + titleOffset,\r\n        key,\r\n      ).attr({ stroke: 'black', dominantBaseline: 'middle', textAnchor: 'middle' });\r\n      titleOffset += 20;\r\n      g.append(keyTitle);\r\n\r\n      for (const valueIndex in values) {\r\n        const valueTitle = this.snap.text(\r\n          x + Math.round(w / 2),\r\n          y + titleOffset,\r\n          values[valueIndex],\r\n        ).attr({ dominantBaseline: 'start', textAnchor: 'middle' });\r\n        titleOffset += 15;\r\n        g.append(valueTitle);\r\n      }\r\n      //titleOffset += 10;\r\n      g.mydata_resultingOffset = titleOffset;\r\n    }\r\n    return g;\r\n  }\r\n\r\n  svgCreate_byType(type, x, y, w, h) {\r\n    if (type === 'Class') {\r\n      return this.svgCreate_ClassBlock(x, y, w, h);\r\n    } else if (type === 'Use-case') {\r\n      return this.svgPrimitive_Ellipse(x, y, w, h);\r\n    } else if (type === 'Actor') {\r\n      return this.svgCreate_Actor(x, y, w, h);\r\n    }\r\n    return null;\r\n  }\r\n\r\n  svgCreate_ClassBlock(x, y, w, h) {\r\n    const fig = this.snap.rect(x, y, w, h);\r\n    fig.attr({ fill: bgColor, stroke: 'black', strokeWidth: 1 });\r\n    return fig;\r\n  }\r\n\r\n  svgPrimitive_Ellipse(x, y, w, h) {\r\n    const width = Math.round(w / 2);\r\n    const height = Math.round(h / 2);\r\n    const fig = this.snap.ellipse(x + width, y + height, width, height);\r\n    fig.attr({ fill: bgColor, stroke: 'black', strokeWidth: 1 });\r\n    return fig;\r\n  }\r\n\r\n  svgPrimitive_EllipseCenter(x, y, w, h) {\r\n    const fig = this.snap.ellipse(x, y, w, h);\r\n    fig.attr({ fill: bgColor, stroke: 'black', strokeWidth: 1 });\r\n    return fig;\r\n  }\r\n\r\n  // eslint-disable-next-line no-unused-vars\r\n  svgCreate_Actor(x, y, w, h) {\r\n    const g = this.snap.group();\r\n    g.data('ot', g.transform().local);\r\n    Snap.load(actorIcon, (data) => {\r\n      g.append(data);\r\n    });\r\n\r\n    const t = new Snap.Matrix();\r\n    t.scale(w / 80, h / 80, x, y); // scale object\r\n    t.translate(x, y);\r\n    g.transform(t); // apply transformation to object\r\n\r\n    return g;\r\n  }\r\n\r\n  svgCreate_BlockFields(x, y, w, h, additionalFields) {\r\n    let titleOffset = 15;\r\n    const g = this.snap.group();\r\n    g.attr({ 'font-size': '13px' });\r\n    for (const [key, values] of Object.entries(additionalFields)) {\r\n      if (values.length === 0) {\r\n        continue;\r\n      }\r\n\r\n      if (key === 'stereotype') { // Stereotype title\r\n        if (values !== '') {\r\n          const keyTitle = this.snap.text(\r\n            x + Math.round(w / 2),\r\n            y - 40,\r\n            values,\r\n          ).attr({ stroke: 'black', dominantBaseline: 'middle', textAnchor: 'middle' });\r\n          g.append(keyTitle);\r\n        }\r\n        continue;\r\n      }\r\n\r\n      const keyTitle = this.snap.text(\r\n        x + Math.round(w / 2),\r\n        y + titleOffset,\r\n        key,\r\n      ).attr({ stroke: 'black', dominantBaseline: 'middle', textAnchor: 'middle' });\r\n      titleOffset += 20;\r\n      g.append(keyTitle);\r\n\r\n      for (const valueIndex in values) {\r\n        const valueTitle = this.snap.text(\r\n          x + Math.round(w / 2),\r\n          y + titleOffset,\r\n          values[valueIndex],\r\n        ).attr({ dominantBaseline: 'start', textAnchor: 'middle' });\r\n        titleOffset += 15;\r\n        g.append(valueTitle);\r\n      }\r\n      titleOffset += 10;\r\n    }\r\n\r\n    return g;\r\n  }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/boundary/SnapUtils/svgBlockFactory.js","/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable guard-for-in */\r\n/* eslint-disable camelcase */\r\n/* eslint-disable max-len */\r\nimport { dragMove, dragStart, dragStop } from '../DiagramUI/drag';\r\nimport { turnOnscaleMode, select } from '../DiagramUI/scale';\r\nimport SvgBlockFactory from './svgBlockFactory';\r\n\r\nconst templates = require('./assets/blockTypes.json');\r\n/**\r\n *        blockGroup,  svg \r\n *    ,      blockGroup[i]   \r\n *      : blockGroup[i][0] - ()\r\n *                                  blockGroup[i][1] - ,    (  )\r\n */\r\nexport default class BlockView {\r\n  block = null;\r\n  connections = null;\r\n  isScaling = false;\r\n  snap = null;\r\n  factory = null;\r\n  blockGroup = null;\r\n  constructor(block, snap, connections) {\r\n    this.block = block;\r\n    this.snap = snap;\r\n    this.connections = connections;\r\n    this.factory = new SvgBlockFactory(snap);\r\n  }\r\n\r\n  redrawOnSnap(/*x = this.block.coords[0], y = this.block.coords[1],\r\n    width = this.block.width, height = this.block.height*/) {\r\n    if (this.blockGroup != null) {\r\n      this.blockGroup.remove();\r\n    }\r\n    // eslint-disable-next-line no-console\r\n    console.log(this.block);\r\n    // console.log(`Stereotype: ${this.block.additionalFields.stereotype}`);\r\n    this.blockGroup = this.snap.group();\r\n    let template;\r\n    if (this.block.Type === 'Class') {\r\n      if (this.block.additionalFields.stereotype === undefined ||\r\n        this.block.additionalFields.stereotype === '') {\r\n        template = templates.filter(elem => elem.name === 'Class-default')[0];\r\n      } else {\r\n        template = templates.filter(elem => elem.name === `Class-${this.block.additionalFields.stereotype}`)[0];\r\n      }\r\n    } else {\r\n      template = templates.filter(elem => elem.name === this.block.Type)[0];\r\n    }\r\n    this.blockGroup = this.constructSVGBlock(template, this.block);\r\n    for (let i = this.connections.length; i--;) {\r\n      this.snap.connection(this.connections[i]);\r\n    }\r\n\r\n    this.blockGroup.drag(dragMove, dragStart, dragStop);\r\n    this.blockGroup.dblclick(turnOnscaleMode);\r\n    this.blockGroup.click(select);\r\n    this.blockGroup.data('blockView', this);\r\n  }\r\n\r\n  constructSVGBlock(template, block) {\r\n    const elements = template.elements;\r\n    const x = block.coords[0];\r\n    let y = block.coords[1];\r\n    const width = block.width;\r\n    const height = this.block.height;\r\n    let fixedHeightSum = 0;\r\n    let fixedHeightNum = 0;\r\n    for (const element of elements) {\r\n      if (element.height != null) {\r\n        fixedHeightSum += element.height;\r\n        fixedHeightNum++;\r\n      }\r\n    }\r\n\r\n    const svgParts = [];\r\n    for (const element of elements) {\r\n      let currentElementHeight = Math.round((height - fixedHeightSum) / (elements.length - fixedHeightNum));\r\n      if (element.height != null) {\r\n        currentElementHeight = element.height;\r\n      }\r\n      let svgPrimitive = null;\r\n      if (element.shape != null) {\r\n        svgPrimitive = this.factory.svgPrimitive_forName(element.shape, x, y, width, currentElementHeight);\r\n      } else if (element['shape-svg'] != null) {\r\n        svgPrimitive = this.factory.svgPrimitive_fromFile(element['shape-svg'], x, y, width, currentElementHeight);\r\n      } else {\r\n        console.log('Couldn`t find shape', element);\r\n      }\r\n      const svgTexts = [];\r\n      let verticalOffset = 0;\r\n      // TODO This for isn`t needed more, it is better to delete it with array in config in future\r\n      for (let i = 0; i < element.textFieldsCnts.length; i++) {\r\n        const currName = element.textFieldsNames[i];\r\n        if (element.textFieldsCnts[i] === 1) {\r\n          const x_center = x + (width / 2);\r\n          const y_center = y + (currentElementHeight / 2);\r\n\r\n          if (currName === '<title>') {\r\n            if (template.name === 'Actor') {\r\n              // Actor's title should be under actor svg\r\n              const bottom_center = y + currentElementHeight;\r\n              svgTexts.push(this.factory.svgCreate_Titile(x_center, bottom_center + 10, block.title));\r\n            } else {\r\n              svgTexts.push(this.factory.svgCreate_Titile(x_center, y_center, block.title));\r\n            }\r\n          } else {\r\n            svgTexts.push(this.factory.svgCreate_Titile(x_center, y_center, block.additionalFields[currName]));\r\n          }\r\n        } else if (element.textFieldsCnts[i] === '*') {\r\n          const fields = {};\r\n          fields[currName] = this.block.additionalFields[currName];\r\n          const result = this.factory.svgCreate_TextFields(x, y + verticalOffset, width, fields);\r\n          verticalOffset += result.mydata_resultingOffset;\r\n          delete result.mydata_resultingOffset;\r\n          svgTexts.push(result);\r\n        } else {\r\n          console.log('Couldn`t understand field count type');\r\n        }\r\n      }\r\n      const svgTextsGroup = this.factory.svgConstruct(...svgTexts);\r\n      const svgElementGroup = this.factory.svgConstruct(svgPrimitive, svgTextsGroup);\r\n      svgParts.push(svgElementGroup);\r\n      y += currentElementHeight;\r\n    }\r\n    return this.factory.svgConstruct(...svgParts);\r\n  }\r\n\r\n  drawLinkPoints() {\r\n    const bbox = this.blockGroup.getBBox();\r\n    const p = [{\r\n      x: bbox.x + (bbox.width / 4),\r\n      y: bbox.y - 1,\r\n    }, {\r\n      x: bbox.x + (bbox.width / 2),\r\n      y: bbox.y - 1,\r\n    }, {\r\n      x: bbox.x + ((bbox.width / 4) * 3),\r\n      y: bbox.y - 1,\r\n    }, {\r\n      x: bbox.x + (bbox.width / 4),\r\n      y: bbox.y + bbox.height + 1,\r\n    }, {\r\n      x: bbox.x + (bbox.width / 2),\r\n      y: bbox.y + bbox.height + 1,\r\n    }, {\r\n      x: bbox.x + ((bbox.width / 4) * 3),\r\n      y: bbox.y + bbox.height + 1,\r\n    }, {\r\n      x: bbox.x - 1,\r\n      y: bbox.y + (bbox.height / 4),\r\n    }, {\r\n      x: bbox.x - 1,\r\n      y: bbox.y + (bbox.height / 2),\r\n    }, {\r\n      x: bbox.x - 1,\r\n      y: bbox.y + ((bbox.height / 4) * 3),\r\n    }, {\r\n      x: bbox.x + bbox.width + 1,\r\n      y: bbox.y + (bbox.height / 4),\r\n    }, {\r\n      x: bbox.x + bbox.width + 1,\r\n      y: bbox.y + (bbox.height / 2),\r\n    }, {\r\n      x: bbox.x + bbox.width + 1,\r\n      y: bbox.y + ((bbox.height / 4) * 3),\r\n    }];\r\n\r\n    const points = [];\r\n    p.forEach((point) => {\r\n      const snapPoint = this.snap.circle(point.x, point.y, 3).attr({ fill: 'blue' });\r\n      points.push(snapPoint);\r\n    });\r\n\r\n    this.blockGroup.data('linkPoints', points);\r\n  }\r\n\r\n  removeLinkPoints() {\r\n    const points = this.blockGroup.data('linkPoints');\r\n    if (points != null) {\r\n      points.forEach((point) => {\r\n        point.remove();\r\n      });\r\n\r\n      this.blockGroup.data('linkPoints', null);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/boundary/SnapUtils/blockView.js","/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable guard-for-in */\r\n/* eslint-disable no-console */\r\n/* eslint-disable func-names */\r\n\r\nimport { updateBlockPositionProperties } from '../serverProtocol';\r\nimport BlockView from '../SnapUtils/blockView';\r\n\r\nlet scalingBlockGroup = null;\r\nlet lastModifiedGroup = null;\r\nlet lastScaleX = 1;\r\nlet lastScaleY = 1;\r\n\r\nconst scaleStart = function () {\r\n  scalingBlockGroup.data('origTransform', scalingBlockGroup.transform().local);\r\n};\r\n\r\nconst scaleMove = function (dx, dy) {\r\n  // TODO   ,      BBox\r\n  const groupBox = scalingBlockGroup.getBBox();\r\n\r\n  let scaleX = 1;\r\n  let scaleY = 1;\r\n  if (this.data('side') === 'topleft') {\r\n    scaleX = dx > 0 ?\r\n      groupBox.width / (groupBox.width + dx) : (groupBox.width - dx) / groupBox.width;\r\n    scaleY = dy > 0 ?\r\n      groupBox.height / (groupBox.height + dy) : (groupBox.height - dy) / groupBox.height;\r\n  } else if (this.data('side') === 'topright') {\r\n    scaleX = dx > 0 ?\r\n      (groupBox.width + dx) / groupBox.width : groupBox.width / (groupBox.width - dx);\r\n    scaleY = dy > 0 ?\r\n      groupBox.height / (groupBox.height + dy) : (groupBox.height - dy) / groupBox.height;\r\n  } else if (this.data('side') === 'bottomleft') {\r\n    scaleX = dx > 0 ?\r\n      groupBox.width / (groupBox.width + dx) : (groupBox.width - dx) / groupBox.width;\r\n    scaleY = dy > 0 ?\r\n      (groupBox.height + dy) / groupBox.height : groupBox.height / (groupBox.height - dy);\r\n  } else if (this.data('side') === 'bottomright') {\r\n    scaleX = dx > 0 ?\r\n      (groupBox.width + dx) / groupBox.width : groupBox.width / (groupBox.width - dx);\r\n    scaleY = dy > 0 ?\r\n      (groupBox.height + dy) / groupBox.height : groupBox.height / (groupBox.height - dy);\r\n  }\r\n\r\n  if (scalingBlockGroup[0].getBBox().width * scaleX > 100) {\r\n    lastScaleX = scaleX;\r\n  }\r\n\r\n  if (scalingBlockGroup[0].getBBox().height * scaleY > 50) {\r\n    lastScaleY = scaleY;\r\n  }\r\n\r\n  scalingBlockGroup.attr({\r\n    transform: `${scalingBlockGroup.data('origTransform') + (scalingBlockGroup.data('origTransform') ? 'S' : 's') + lastScaleX},${lastScaleY}`,\r\n  });\r\n};\r\n\r\nexport const scaleStop = function () {\r\n};\r\n\r\nfunction updateBlockPosition(blockGroup) {\r\n  scalingBlockGroup[0].remove();\r\n\r\n  const coords = scalingBlockGroup.getBBox();\r\n\r\n  blockGroup.data('blockView').block.setCoords([Math.round(coords.x), Math.round(coords.y)]);\r\n\r\n  blockGroup.data('blockView').block.setWidth(Math.round(coords.width));\r\n  blockGroup.data('blockView').block.setHeight(Math.round(coords.height));\r\n  // eslint-disable-next-line no-param-reassign\r\n  blockGroup.data('blockView').isScaling = false;\r\n\r\n  const thisBlock = blockGroup.data('blockView').block;\r\n  updateBlockPositionProperties(thisBlock.Id, thisBlock.width,\r\n    thisBlock.height, thisBlock.coords);\r\n\r\n  blockGroup.data('blockView').redrawOnSnap();\r\n  scalingBlockGroup.remove();\r\n\r\n  lastModifiedGroup = null;\r\n}\r\n\r\n// eslint-disable-next-line func-names\r\nexport const turnOnscaleMode = function () {\r\n  this.data('blockView').removeLinkPoints();\r\n  const snap = this.data('blockView').snap;\r\n\r\n  if (lastModifiedGroup != null && lastModifiedGroup !== this) {\r\n    updateBlockPosition(lastModifiedGroup);\r\n  }\r\n  lastModifiedGroup = this;\r\n\r\n  if (this.data('blockView').isScaling === false) {\r\n    this.data('blockView').isScaling = true;\r\n    // Create group from figures (without texts) -> [i][0] - figure of i-th primitive\r\n    // TODO when all block views will use such interface\r\n    /* const g = this.snap.group();\r\n    for (let i = 0; i < this.length; i += 1) {\r\n      g.append(this[i][0]);\r\n    } */\r\n    const groupBbox = this.getBBox();\r\n    const anchors = [];\r\n    anchors[0] = snap.circle(groupBbox.x, groupBbox.y, 5).attr({ class: 'handler', fill: 'blue' });\r\n    anchors[0].data('side', 'topleft');\r\n    anchors[0].drag(scaleMove, scaleStart, scaleStop);\r\n    anchors[1] = snap.circle(groupBbox.x + groupBbox.width, groupBbox.y, 5).attr({ class: 'handler', fill: 'blue' });\r\n    anchors[1].data('side', 'topright');\r\n    anchors[1].drag(scaleMove, scaleStart, scaleStop);\r\n    anchors[2] = snap.circle(groupBbox.x, groupBbox.y + groupBbox.height, 5).attr({ class: 'handler', fill: 'blue' });\r\n    anchors[2].data('side', 'bottomleft');\r\n    anchors[2].drag(scaleMove, scaleStart, scaleStop);\r\n    anchors[3] = snap.circle(groupBbox.x + groupBbox.width, groupBbox.y + groupBbox.height, 5).attr({ class: 'handler', fill: 'blue' });\r\n    anchors[3].data('side', 'bottomright');\r\n    anchors[3].drag(scaleMove, scaleStart, scaleStop);\r\n    // TODO ^\r\n    scalingBlockGroup = snap.group(this, anchors[0], anchors[1], anchors[2], anchors[3]);\r\n  } else {\r\n    updateBlockPosition(this);\r\n  }\r\n};\r\n\r\n// eslint-disable-next-line import/no-mutable-exports\r\nexport let sel = null;\r\nexport const select = function () {\r\n  // eslint-disable-next-line no-prototype-builtins\r\n  if (BlockView.prototype.isPrototypeOf(this.data('blockView'))) {\r\n    if (sel !== null) {\r\n      sel.removeLinkPoints();\r\n    }\r\n    sel = this.data('blockView');\r\n    sel.drawLinkPoints();\r\n  }\r\n};\r\n\r\n// eslint-disable-next-line import/no-mutable-exports\r\nexport let selLink = null;\r\nexport const selectLink = function () {\r\n  // eslint-disable-next-line no-prototype-builtins\r\n  if (this.data('lineObject') !== null) {\r\n    selLink = this.data('lineObject');\r\n  }\r\n};\r\n\r\nexport const setBlockToNull = function () {\r\n  sel = null;\r\n};\r\n\r\nexport const setLinkToNull = function () {\r\n  selLink = null;\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/boundary/DiagramUI/scale.js","/* eslint-disable max-len */\r\n/* eslint-disable object-shorthand */\r\n/* eslint-disable prefer-template */\r\n/* eslint-disable no-shadow */\r\n/* eslint-disable consistent-return */\r\n/* eslint-disable no-param-reassign */\r\n/* eslint-disable func-names */\r\nimport Snap from 'snapsvg-cjs';\r\n\r\nconst linkWidth = 5;\r\nSnap.plugin((Snap, Element, Paper) => {\r\n  const changeColor = function (color) {\r\n    if (this.line.attr('stroke') !== 'none') {\r\n      this.line.attr({ stroke: color });\r\n    }\r\n    if (this.bg.attr('stroke') !== 'none') {\r\n      this.bg.attr({ stroke: color });\r\n    }\r\n    if (this.arrow !== undefined) {\r\n      this.arrow.attr({ stroke: color, fill: color });\r\n    }\r\n  };\r\n  Paper.prototype.connection = function (firstBlockView, secondBlockView, lId, linkType) {\r\n    let line = '#000';\r\n    const bg = '#000';\r\n    if (firstBlockView.line && firstBlockView.from && firstBlockView.to) {\r\n      line = firstBlockView;\r\n      firstBlockView = line.from;\r\n      secondBlockView = line.to;\r\n      linkType = line.linkType;\r\n    }\r\n    const bb1 = firstBlockView.blockGroup.getBBox();\r\n    const bb2 = secondBlockView.blockGroup.getBBox();\r\n    let offset = 20;\r\n    if (linkType === 'Association(Bidirectional)') {\r\n      offset = 0;\r\n    }\r\n    const p = [\r\n      { x: bb1.x + (bb1.width / 4), y: bb1.y - 1 },\r\n      { x: bb1.x + (bb1.width / 2), y: bb1.y - 1 },\r\n      { x: bb1.x + ((bb1.width / 4) * 3), y: bb1.y - 1 },\r\n      { x: bb1.x + (bb1.width / 4), y: bb1.y + bb1.height + 1 },\r\n      { x: bb1.x + (bb1.width / 2), y: bb1.y + bb1.height + 1 },\r\n      { x: bb1.x + ((bb1.width / 4) * 3), y: bb1.y + bb1.height + 1 },\r\n      { x: bb1.x - 1, y: bb1.y + (bb1.height / 4) },\r\n      { x: bb1.x - 1, y: bb1.y + (bb1.height / 2) },\r\n      { x: bb1.x - 1, y: bb1.y + ((bb1.height / 4) * 3) },\r\n      { x: bb1.x + bb1.width + 1, y: bb1.y + (bb1.height / 4) },\r\n      { x: bb1.x + bb1.width + 1, y: bb1.y + (bb1.height / 2) },\r\n      { x: bb1.x + bb1.width + 1, y: bb1.y + ((bb1.height / 4) * 3) },\r\n\r\n      { x: bb2.x + (bb2.width / 4), y: bb2.y - 1 - offset },\r\n      { x: bb2.x + (bb2.width / 2), y: bb2.y - 1 - offset },\r\n      { x: bb2.x + ((bb2.width / 4) * 3), y: bb2.y - 1 - offset },\r\n      { x: bb2.x + (bb2.width / 4), y: bb2.y + bb2.height + 1 + offset },\r\n      { x: bb2.x + (bb2.width / 2), y: bb2.y + bb2.height + 1 + offset },\r\n      { x: bb2.x + ((bb2.width / 4) * 3), y: bb2.y + bb2.height + 1 + offset },\r\n      { x: bb2.x - 1 - offset, y: bb2.y + (bb2.height / 4) },\r\n      { x: bb2.x - 1 - offset, y: bb2.y + (bb2.height / 2) },\r\n      { x: bb2.x - 1 - offset, y: bb2.y + ((bb2.height / 4) * 3) },\r\n      { x: bb2.x + bb2.width + 1 + offset, y: bb2.y + (bb2.height / 4) },\r\n      { x: bb2.x + bb2.width + 1 + offset, y: bb2.y + (bb2.height / 2) },\r\n      { x: bb2.x + bb2.width + 1 + offset, y: bb2.y + ((bb2.height / 4) * 3) },\r\n    ];\r\n    const d = {};\r\n    const dis = [];\r\n    let dx = 0;\r\n    let dy = 0;\r\n    let res;\r\n\r\n    for (let i = 0; i < 12; i += 1) {\r\n      for (let j = 12; j < 24; j += 1) {\r\n        dx = Math.abs(p[i].x - p[j].x);\r\n        dy = Math.abs(p[i].y - p[j].y);\r\n        // if ((i === j - 4) || (((i !== 3 && j !== 6) || p[i].x < p[j].x) && ((i !== 2 && j !== 7) ||\r\n        //   p[i].x > p[j].x) && ((i !== 0 && j !== 5) || p[i].y > p[j].y) && ((i !== 1 && j !== 4) ||\r\n        //   p[i].y < p[j].y))\r\n        // ) {\r\n        dis.push(dx + dy);\r\n        d[dis[dis.length - 1]] = [i, j];\r\n        // }\r\n      }\r\n    }\r\n\r\n    if (dis.length === 0) {\r\n      res = [0, 4];\r\n    } else {\r\n      res = d[Math.min(...dis)];\r\n    }\r\n    const x1 = p[res[0]].x;\r\n    const y1 = p[res[0]].y;\r\n    const x4 = p[res[1]].x;\r\n    const y4 = p[res[1]].y;\r\n\r\n    dx = Math.max(Math.abs(x1 - x4) / 2, 10);\r\n    dy = Math.max(Math.abs(y1 - y4) / 2, 10);\r\n    // const x2 = [x1, x1, x1 - dx, x1 + dx][res[0]].toFixed(3);\r\n    // const y2 = [y1 - dy, y1 + dy, y1, y1][res[0]].toFixed(3);\r\n    // const x3 = [0, 0, 0, 0, x4, x4, x4 - dx, x4 + dx][res[1]].toFixed(3);\r\n    // const y3 = [0, 0, 0, 0, y1 + dy, y1 - dy, y4, y4][res[1]].toFixed(3);\r\n    // const path = [`M${x1.toFixed(3)}`, `${y1.toFixed(3)}C${x2}`,\r\n    // y2, x3, y3, x4.toFixed(3), y4.toFixed(3)].join(',');\r\n    const path = [`M${x1.toFixed(3)}`, `${y1.toFixed(3)}`, x4.toFixed(3), y4.toFixed(3)].join(',');\r\n\r\n    let arrowPointsStr = null;\r\n    if (x4 === (bb2.x - 21)) {\r\n      arrowPointsStr = [x4, y4 - 5, x4, y4 + 5, x4 + 20, y4].join(',');\r\n    } else if (x4 === (bb2.x + bb2.width + 21)) {\r\n      arrowPointsStr = [x4, y4 - 5, x4, y4 + 5, x4 - 20, y4].join(',');\r\n    } if (y4 === (bb2.y - 21)) {\r\n      arrowPointsStr = [x4 - 5, y4,\r\n        x4 + 5, y4, x4, y4 + 20].join(',');\r\n    } else if (y4 === (bb2.y + bb2.height + 21)) {\r\n      arrowPointsStr = [x4 - 5, y4,\r\n        x4 + 5, y4, x4, y4 - 20].join(',');\r\n    }\r\n\r\n    if (line && line.line) {\r\n      line.bg.attr({ path });\r\n      if (linkType === 'Association') {\r\n        line.line.attr({\r\n          path,\r\n        });\r\n        line.arrow.attr({ points: arrowPointsStr });\r\n      } else if (linkType === 'Association(Bidirectional)') {\r\n        line.line.attr({\r\n          path,\r\n        });\r\n      } else if (linkType === 'Dependency') {\r\n        line.line.attr({\r\n          path,\r\n          'stroke-dasharray': 10 + ' ' + 10,\r\n          'stroke-dashoffset': 10,\r\n          'stroke-width': linkWidth,\r\n        });\r\n        line.arrow.attr({ points: arrowPointsStr });\r\n      } else {\r\n        line.line.attr({\r\n          path,\r\n        });\r\n      }\r\n    } else {\r\n      let returnObj;\r\n      if (linkType === 'Association') {\r\n        const arrow = this.polyline().attr({\r\n          stroke: '#000',\r\n          fill: '#000',\r\n          points: arrowPointsStr,\r\n        });\r\n        returnObj = {\r\n          bg: bg && bg.split && this.path(path).attr({\r\n            stroke: bg,\r\n            fill: 'none',\r\n            'stroke-width': linkWidth,\r\n          }),\r\n          line: this.path(path).attr({\r\n            stroke: line,\r\n            fill: 'none',\r\n          }),\r\n          linkType: linkType,\r\n          from: firstBlockView,\r\n          to: secondBlockView,\r\n          arrow: arrow,\r\n          lId: lId,\r\n          changeColor: changeColor,\r\n        };\r\n      } else if (linkType === 'Association(Bidirectional)') {\r\n        returnObj = {\r\n          bg: bg && bg.split && this.path(path).attr({\r\n            stroke: bg,\r\n            fill: 'none',\r\n            'stroke-width': linkWidth,\r\n          }),\r\n          line: this.path(path).attr({\r\n            stroke: line,\r\n            fill: 'none',\r\n          }),\r\n          linkType: linkType,\r\n          from: firstBlockView,\r\n          to: secondBlockView,\r\n          lId: lId,\r\n          changeColor: changeColor,\r\n        };\r\n      } else if (linkType === 'Dependency') {\r\n        const arrow = this.polyline().attr({\r\n          stroke: '#000',\r\n          fill: '#000',\r\n          points: arrowPointsStr,\r\n        });\r\n        returnObj = {\r\n          bg: bg && bg.split && this.path(path).attr({\r\n            fill: 'none',\r\n          }),\r\n          line: this.path(path).attr({\r\n            stroke: line,\r\n            fill: 'none',\r\n            'stroke-dasharray': 10 + ' ' + 10,\r\n            'stroke-dashoffset': 10,\r\n            'stroke-width': linkWidth,\r\n          }),\r\n          linkType: linkType,\r\n          from: firstBlockView,\r\n          to: secondBlockView,\r\n          arrow: arrow,\r\n          lId: lId,\r\n          changeColor: changeColor,\r\n        };\r\n      } else {\r\n        returnObj = {\r\n          bg: bg && bg.split && this.path(path).attr({\r\n            stroke: line,\r\n            fill: 'none',\r\n            'stroke-width': linkWidth,\r\n          }),\r\n          line: this.path(path).attr({\r\n            stroke: line,\r\n            fill: 'none',\r\n          }),\r\n          linkType: linkType,\r\n          from: firstBlockView,\r\n          to: secondBlockView,\r\n          lId: lId,\r\n          changeColor: changeColor,\r\n        };\r\n      }\r\n      returnObj.line.data({ lineObject: returnObj });\r\n      return returnObj;\r\n    }\r\n  };\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/boundary/SnapUtils/connection.js","<template>\r\n  <svg  @click=\"updateInfo\" id=\"mySvg\" class=\"editorSvg\"\r\n        :height=\"height\" :width=\"width\" ref=\"canvas\"></svg>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-console */\r\nimport Snap from 'snapsvg-cjs';\r\nimport { setBounds } from './drag';\r\nimport { sel, selLink, selectLink, setBlockToNull, setLinkToNull } from './scale';\r\nimport BlockView from '../SnapUtils/blockView';\r\nimport '../SnapUtils/connection';\r\nimport Diagram from '../../entity/diagram';\r\n\r\nexport default {\r\n  name: 'DiagramUi',\r\n  props: {\r\n    currentDiagram: Diagram,\r\n  },\r\n  emits: {\r\n    'ready-add-new-link': { sourceID: Number, targetID: Number },\r\n    'block-view-selected': BlockView,\r\n    'link-selected': Object,\r\n    'turn-off-link-mode': null,\r\n    // TODO return only block entity and make changes in View in this component\r\n  },\r\n  data() {\r\n    return {\r\n      snap: null,\r\n      selectedBlockView: null,\r\n      selectedLink: null,\r\n      snapBlocks: [],\r\n      snapLinks: [],\r\n      linkSourceBlock: null,\r\n      isLinkAddMode: false,\r\n      height: 800,\r\n      width: 800,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.snap = Snap('#mySvg');\r\n    this.init();\r\n  },\r\n\r\n  methods: {\r\n    init() {\r\n      const bcr = this.$refs.canvas.getBoundingClientRect();\r\n      setBounds(bcr.x, bcr.y, bcr.x + bcr.width, bcr.y + bcr.height);\r\n      this.snap.attr({ viewBox: `0 0 ${this.width} ${this.height}` });\r\n      this.snap.rect(0, 0, this.width, this.height).attr({ fill: 'none', stroke: 'black', strokeWidth: 2 });\r\n      this.currentDiagram.blocks.forEach((block) => {\r\n        const blockView = new BlockView(block, this.snap, this.snapLinks);\r\n        blockView.redrawOnSnap();\r\n        this.snapBlocks.push(blockView);\r\n      });\r\n      this.currentDiagram.links.forEach((link) => {\r\n        const sBlockView = this.snapBlocks.filter(blockView => blockView.block.Id === link.sId);\r\n        const tBlockView = this.snapBlocks.filter(blockView => blockView.block.Id === link.tId);\r\n        if (sBlockView.length === 1 && tBlockView.length === 1) {\r\n          const newLink = this.snap.connection(sBlockView[0], tBlockView[0], link.Id, link.Type);\r\n          newLink.line.click(selectLink);\r\n          this.snapLinks.push(newLink);\r\n        } else {\r\n          console.log('Incorrect link parameters!');\r\n        }\r\n      });\r\n    },\r\n\r\n    // It is better to render new block than rerender all canvas\r\n    drawNewBlock(newBlock) {\r\n      const blockView = new BlockView(newBlock, this.snap, this.snapLinks);\r\n      blockView.redrawOnSnap();\r\n      this.snapBlocks.push(blockView);\r\n    },\r\n\r\n    updateInfo() {\r\n      console.log(sel, selLink);\r\n      if (sel !== null) {\r\n        if (this.selectedBlockView === sel) {\r\n          this.selectedBlockView.removeLinkPoints();\r\n          this.selectedBlockView = null;\r\n          setBlockToNull();\r\n          this.$emit('block-view-selected', this.selectedBlockView);\r\n        } else {\r\n          if (this.selectedLink !== null) {\r\n            this.selectedLink = null;\r\n            setLinkToNull();\r\n            this.$emit('link-selected', this.selectedLink);\r\n          }\r\n          console.log('Update block');\r\n          this.selectedBlockView = sel;\r\n          this.$emit('block-view-selected', this.selectedBlockView);\r\n          if (this.isLinkAddMode) {\r\n            if (this.linkSourceBlock != null && this.linkSourceBlock.block.Id !== sel.block.Id) {\r\n              console.log('ready-add-new-link');\r\n              this.$emit('ready-add-new-link',\r\n                { sourceID: this.linkSourceBlock.block.Id, targetID: sel.block.Id });\r\n            } else {\r\n              this.linkSourceBlock = sel;\r\n              console.log('first tap');\r\n              console.log(this.linkSourceBlock);\r\n            }\r\n          } else {\r\n            this.linkSourceBlock = null;\r\n          }\r\n        }\r\n      }\r\n      if (selLink !== null) {\r\n        if (this.selectedLink === selLink) {\r\n          this.selectedLink = null;\r\n          setLinkToNull();\r\n          this.$emit('link-selected', this.selectedLink);\r\n        } else {\r\n          if (this.selectedBlockView !== null) {\r\n            this.selectedBlockView = null;\r\n            setBlockToNull();\r\n            this.$emit('block-view-selected', this.selectedBlockView);\r\n          }\r\n          this.selectedLink = selLink;\r\n          this.$emit('link-selected', this.selectedLink);\r\n        }\r\n      }\r\n    },\r\n\r\n    drawNewLink(linkType, linkId, sId, tId) {\r\n      console.log('Drawing new link');\r\n      const newLink = this.snap.connection(sId, tId, linkId, linkType);\r\n      newLink.line.click(selectLink);\r\n      this.snapLinks.push(newLink);\r\n      this.linkSourceBlock = null;\r\n      this.isLinkAddMode = false;\r\n      this.$emit('turn-off-link-mode');\r\n    },\r\n\r\n    toggleLinkMode(properties) {\r\n      this.isLinkAddMode = properties.bool;\r\n    },\r\n\r\n    changeFields() {\r\n      this.selectedBlockView.redrawOnSnap();\r\n    },\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.editorSvg {\r\n  /*border: 5px solid black;*/\r\n  margin: 5px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/boundary/DiagramUI/DiagramUI.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('svg',{ref:\"canvas\",staticClass:\"editorSvg\",attrs:{\"id\":\"mySvg\",\"height\":_vm.height,\"width\":_vm.width},on:{\"click\":_vm.updateInfo}})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dac02186\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/boundary/DiagramUI/DiagramUI.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dac02186\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DiagramUI.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DiagramUI.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DiagramUI.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dac02186\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./DiagramUI.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-dac02186\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/DiagramUI/DiagramUI.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div class=\"selection-entry\" style=\"display:flex; flex-direction: column;\r\n        border: 1px solid black;\"\r\n        @click=\"select\"\r\n        v-bind:class=\"{ selected : isSelected }\">\r\n    <svg v-if=\"isBlock\" :id=\"'svgID_' + objectType\" class=\"blockSvg\" height=\"60\" width=\"60\"></svg>\r\n    {{ objectType }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Snap from 'snapsvg-cjs';\r\nimport SvgBlockFactory from '../SnapUtils/svgBlockFactory';\r\n\r\nexport default {\r\n  name: 'SelectionEntry',\r\n  props: {\r\n    objectType: String,\r\n    isBlock: Boolean,\r\n    selectedEntry: String,\r\n  },\r\n  emits: {\r\n    'entry-selected': null,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      snap: null,\r\n      factory: null,\r\n      // isSelected: false,\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    if (this.isBlock) {\r\n      this.snap = Snap(`#svgID_${this.objectType}`);\r\n      this.snap.attr({ viewBox: '0 0 80 80' });\r\n      this.factory = new SvgBlockFactory(this.snap);\r\n      this.factory.svgCreate_byType(this.objectType, 0, 0, 80, 80);\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    select() {\r\n      // eslint-disable-next-line no-console\r\n      console.log('Entry selected: ', this.objectType);\r\n      this.$emit('entry-selected', { objectType: this.objectType, isBlock: this.isBlock });\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    isSelected() {\r\n      return this.objectType === this.selectedEntry;\r\n    },\r\n  },\r\n\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.selection-entry{\r\n  margin: 2px;\r\n  padding: 5px;\r\n}\r\n.blockSvg{\r\n  margin: 4px;\r\n}\r\n.selection-entry:hover{\r\n  background-color: #dddddd;\r\n}\r\n\r\n.selected {\r\n  background-color: #dddddd;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/boundary/SidePanel/SelectionEntry.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"selection-entry\",class:{ selected : _vm.isSelected },staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"border\":\"1px solid black\"},on:{\"click\":_vm.select}},[(_vm.isBlock)?_c('svg',{staticClass:\"blockSvg\",attrs:{\"id\":'svgID_' + _vm.objectType,\"height\":\"60\",\"width\":\"60\"}}):_vm._e(),_vm._v(\"\\n  \"+_vm._s(_vm.objectType)+\"\\n\")])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4bf741ad\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/boundary/SidePanel/SelectionEntry.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4bf741ad\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SelectionEntry.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SelectionEntry.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SelectionEntry.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4bf741ad\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SelectionEntry.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4bf741ad\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/SidePanel/SelectionEntry.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div style=\"width: 300px\">\r\n    <input id=\"blockTitle\" type=\"text\" placeholder=\"Enter block title\"\r\n           name=\"blockTitle\" v-model=\"blockTitle\">\r\n    <div class=\"selection-grid\" style=\"display:flex; flex-direction: row;\">\r\n      <selection-entry v-for=\"type in supportedBlockTypes\"\r\n                       v-bind:object-type=\"type\"\r\n                       v-bind:is-block=\"true\"\r\n                       v-bind:selected-entry=\"blockType\"\r\n                       v-on:entry-selected=\"changeSelected\"\r\n                       v-bind:key=\"type\"/>\r\n    </div>\r\n    <button type=\"button\" class=\"btn icon-plus sidePanelBtn\" v-on:click=\"addNewBlock()\">\r\n      Add new block\r\n    </button>\r\n\r\n    <div class=\"selection-grid\" style=\"display:flex; flex-direction: column;\">\r\n      <selection-entry v-for=\"type in supportedLinkTypes\"\r\n                       v-bind:object-type=\"type\"\r\n                       v-bind:is-block=\"false\"\r\n                       v-bind:selected-entry=\"linkType\"\r\n                       v-on:entry-selected=\"changeSelected\"\r\n                       v-bind:key=\"type\"/>\r\n    </div>\r\n    <div style=\"display:flex; flex-direction: row;\">\r\n      <button v-if=\"!isLinkAddMode\" type=\"button\"\r\n              class=\"btn icon-plus sidePanelBtn\" v-on:click=\"toggleLinkMode()\">\r\n        Enable link mode\r\n      </button>\r\n      <button v-if=\"isLinkAddMode\" type=\"button\"\r\n              class=\"btn icon-plus sidePanelBtn\" v-on:click=\"toggleLinkMode()\">\r\n        Disable link mode\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable no-console */\r\nimport SelectionEntry from './SelectionEntry';\r\n\r\nexport default {\r\n  name: 'SidePanel',\r\n  components: { SelectionEntry },\r\n  props: {\r\n    isLinkAddMode: Boolean,\r\n    supportedBlockTypes: Array,\r\n    supportedLinkTypes: Array,\r\n  },\r\n  emits: {\r\n    'toggle-link-mode': { bool: Boolean },\r\n    'create-block': { Type: String, title: String },\r\n  },\r\n  data() {\r\n    return {\r\n      blockTitle: '',\r\n      blockType: null,\r\n      linkType: null,\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    addNewBlock() {\r\n      // TODO: Find a better way to handle blocks with an empty title\r\n      // TODO: (or a title that only contains spaces)\r\n      if (this.blockType != null) {\r\n        let newTitle;\r\n        if (this.blockTitle.replaceAll(' ', '') === '') {\r\n          newTitle = this.blockType;\r\n        } else {\r\n          newTitle = this.blockTitle;\r\n        }\r\n        this.$emit('create-block', { Type: this.blockType, title: newTitle });\r\n        this.clear();\r\n      }\r\n    },\r\n\r\n    toggleLinkMode() {\r\n      this.$emit('toggle-link-mode', { bool: !this.isLinkAddMode });\r\n    },\r\n\r\n    clear() {\r\n      this.blockTitle = '';\r\n      this.blockType = null;\r\n      this.linkType = null;\r\n    },\r\n\r\n    changeSelected(params) {\r\n      if (params.isBlock) {\r\n        this.blockType = params.objectType;\r\n      } else {\r\n        this.linkType = params.objectType;\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/boundary/SidePanel/SidePanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"300px\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.blockTitle),expression:\"blockTitle\"}],attrs:{\"id\":\"blockTitle\",\"type\":\"text\",\"placeholder\":\"Enter block title\",\"name\":\"blockTitle\"},domProps:{\"value\":(_vm.blockTitle)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.blockTitle=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"selection-grid\",staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\"}},_vm._l((_vm.supportedBlockTypes),function(type){return _c('selection-entry',{key:type,attrs:{\"object-type\":type,\"is-block\":true,\"selected-entry\":_vm.blockType},on:{\"entry-selected\":_vm.changeSelected}})}),1),_vm._v(\" \"),_c('button',{staticClass:\"btn icon-plus sidePanelBtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addNewBlock()}}},[_vm._v(\"\\n    Add new block\\n  \")]),_vm._v(\" \"),_c('div',{staticClass:\"selection-grid\",staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\"}},_vm._l((_vm.supportedLinkTypes),function(type){return _c('selection-entry',{key:type,attrs:{\"object-type\":type,\"is-block\":false,\"selected-entry\":_vm.linkType},on:{\"entry-selected\":_vm.changeSelected}})}),1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\"}},[(!_vm.isLinkAddMode)?_c('button',{staticClass:\"btn icon-plus sidePanelBtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggleLinkMode()}}},[_vm._v(\"\\n      Enable link mode\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.isLinkAddMode)?_c('button',{staticClass:\"btn icon-plus sidePanelBtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.toggleLinkMode()}}},[_vm._v(\"\\n      Disable link mode\\n    \")]):_vm._e()])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b2495986\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/boundary/SidePanel/SidePanel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b2495986\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./SidePanel.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SidePanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./SidePanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b2495986\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./SidePanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b2495986\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/SidePanel/SidePanel.vue\n// module id = null\n// module chunks = ","<template>\r\n  <div>\r\n    <div v-if=\"selectedBlockView!=null\" class=\"editing-panel\">\r\n      <div class=\"panel-header\">\r\n        <h2>Block modification</h2>\r\n        <span v-on:click=\"close\" class=\"closeForm\"\r\n              title=\"Close panel\">X</span>\r\n      </div>\r\n\r\n      <h3 class=\"input-title\"\r\n          style=\"margin-top:5px; margin-bottom:5px;\">\r\n          Name:\r\n      </h3>\r\n      <input id=\"selectedBlockTitle\" ref=\"blockTitle\"\r\n          style=\"padding-left:15px; padding-top:5px; margin-bottom:5px; font-size:17px;\"\r\n          type=\"text\" placeholder=\"Enter block title\"\r\n          name=\"blockTitle\" :value=selectedBlockView.block.title>\r\n\r\n      <h3 class=\"input-title\"\r\n          style=\"margin-top:5px; margin-bottom:5px;\">\r\n          Description:\r\n      </h3>\r\n      <input id=\"selectedBlockDescription\" ref=\"blockDescription\"\r\n          style=\"padding-left:15px; padding-top:5px; margin-bottom:5px; font-size:17px;\"\r\n          type=\"text\" placeholder=\"Enter block description\"\r\n          name=\"blockDescription\" :value=selectedBlockView.block.description>\r\n\r\n      <div v-if=\"selectedBlockView.block.additionalFields\">\r\n        <div v-for=\"attributeKey in Object.keys(selectedBlockView.block.additionalFields)\"\r\n          v-bind:key=\"attributeKey\">\r\n          <div v-if=\"attributeKey=='stereotype'\">\r\n            <h3 class=\"input-title\"\r\n              style=\"margin-top:5px; margin-bottom:5px;\">\r\n              Stereotype\r\n            </h3>\r\n            <select ref=\"selectStereotype\" v-model=\"selectedStereotype\">\r\n              <option>Boundary</option>\r\n              <option>Control</option>\r\n              <option>Entity</option>\r\n              <option></option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div ref=\"additionalFieldsSection\" v-if=\"selectedBlockView.block.additionalFields\">\r\n        <div v-for=\"attributeKey in Object.keys(selectedBlockView.block.additionalFields)\"\r\n          v-bind:key=\"attributeKey\">\r\n          <div v-if=\"attributeKey=='Operations'||attributeKey=='Attributes'\">\r\n            <h3 class=\"input-title\"\r\n              style=\"margin-top:5px; margin-bottom:5px;\">\r\n              {{ attributeKey }}\r\n            </h3>\r\n            <ul class=\"additionalFieldList\">\r\n              <li v-for=\"attributeValue in selectedBlockView.block.additionalFields[attributeKey]\"\r\n                :key=\"attributeValue\">\r\n                <div style=\"display:flex; flex-direction: row; align-items: center\">\r\n                  <input class=\"additionalFieldItem\" :id=attributeKey :value=attributeValue>\r\n                  <button class=\"deleteAttributeValueBtn\" role=\"button\"\r\n                    v-on:click=\"deleteItem(attributeKey, attributeValue)\">\r\n                    X\r\n                  </button>\r\n                </div>\r\n              </li>\r\n            </ul>\r\n            <button class=\"addNewAttributeValueBtn\" role=\"button\"\r\n              v-on:click=\"addNewItem(attributeKey)\">\r\n              Add new item\r\n            </button>\r\n          </div>\r\n          <div v-else-if=\"attributeKey!=='stereotype'\">\r\n            <div class=\"input-title\">{{ attributeKey }}:</div>\r\n            <input type=\"text\" placeholder=\"Enter property value\"\r\n                :value=selectedBlockView.block.additionalFields[attributeKey]>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <button class=\"btn btn-1\" style=\"margin-left: 20px\" v-on:click=\"apply('')\">\r\n        Apply Changes\r\n      </button>\r\n      <button class=\"btn btn-1\"\r\n        style=\"margin-left: 20px; background: red; color: white\" v-on:click=\"deleteBlock()\">\r\n        Delete block\r\n      </button>\r\n    </div>\r\n    <div v-if=\"selectedLink!=null\">\r\n      <button class=\"btn btn-1\"\r\n        style=\"margin-left: 20px; background: red; color: white\" v-on:click=\"deleteLink()\">\r\n        Delete link\r\n      </button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n/* eslint-disable guard-for-in */\r\n/* eslint-disable no-restricted-syntax */\r\n/* eslint-disable no-console */\r\nimport blockView from './SnapUtils/blockView';\r\n\r\nexport default {\r\n  name: 'EditingPanel',\r\n  props: {\r\n    selectedBlockView: blockView,\r\n    selectedLink: Object,\r\n  },\r\n  emits: {\r\n    'close-panel': null,\r\n    'apply-changes': {\r\n      additionalFields: {},\r\n      title: String,\r\n      description: String,\r\n    },\r\n    'item-deleted': {},\r\n    'delete-block': { blockToDelete: Object },\r\n    'delete-link': Object,\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      snap: null,\r\n      selectedStereotype: '',\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    this.updateStereotypySelection();\r\n  },\r\n\r\n  updated() {\r\n    this.updateStereotypySelection();\r\n  },\r\n\r\n  methods: {\r\n    close() {\r\n      this.$emit('close-panel');\r\n    },\r\n\r\n    updateStereotypySelection() {\r\n      if (this.selectedBlockView.block.additionalFields) {\r\n        if (this.selectedBlockView.block.additionalFields.stereotype) {\r\n          const currentOption = this.selectedBlockView.block.additionalFields.stereotype;\r\n          for (const option in Object.values(this.$refs.selectStereotype[0])) {\r\n            if (this.$refs.selectStereotype[0][option] !== undefined) {\r\n              if (this.$refs.selectStereotype[0][option].value === currentOption) {\r\n                this.$refs.selectStereotype[0][option].selected = true;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    },\r\n\r\n    apply(newItemKey = '') {\r\n      const newAdditionFieldsDict = {};\r\n      if (this.selectedBlockView.block.additionalFields !== null) {\r\n        const oldKeys = Object.keys(this.selectedBlockView.block.additionalFields);\r\n        for (const attributeKey in oldKeys) {\r\n          newAdditionFieldsDict[oldKeys[attributeKey]] = [];\r\n        }\r\n\r\n        const additionalFieldInputs = this.$refs.additionalFieldsSection.querySelectorAll('input');\r\n\r\n        additionalFieldInputs.forEach((fieldInput) => {\r\n          if (!(fieldInput.id in newAdditionFieldsDict)) {\r\n            newAdditionFieldsDict[fieldInput.id] = [];\r\n          }\r\n\r\n          if (fieldInput.value !== '') {\r\n            newAdditionFieldsDict[fieldInput.id].push(fieldInput.value);\r\n          }\r\n        });\r\n        if (newItemKey !== '') { newAdditionFieldsDict[newItemKey].push('Value'); }\r\n\r\n        if (this.selectedBlockView.block.additionalFields.stereotype) {\r\n          newAdditionFieldsDict.stereotype = this.selectedStereotype;\r\n        }\r\n      }\r\n      // TODO work with SVG should be only in DiagramUI\r\n      // this.selectedBlockView.blockGroup[1].node.textContent = this.$refs.blockTitle.value;\r\n      // if (sendChanges) {\r\n      this.$emit('apply-changes', {\r\n        additionalFields: newAdditionFieldsDict,\r\n        title: this.$refs.blockTitle.value,\r\n        description: this.$refs.blockDescription.value,\r\n      });\r\n      // }\r\n    },\r\n\r\n    addNewItem(itemType) {\r\n      this.apply(itemType);\r\n    },\r\n\r\n    deleteItem(attributeKey, attributeValue) {\r\n      const newAdditionFieldsDict = {};\r\n      const additionalFieldInputs = this.$refs.additionalFieldsSection.querySelectorAll('input');\r\n      additionalFieldInputs.forEach((fieldInput) => {\r\n        if (fieldInput.id in newAdditionFieldsDict === false) {\r\n          newAdditionFieldsDict[fieldInput.id] = [];\r\n        }\r\n\r\n        if (((fieldInput.id === attributeKey) && (fieldInput.value === attributeValue)) === false) {\r\n          newAdditionFieldsDict[fieldInput.id].push(fieldInput.value);\r\n        }\r\n      });\r\n\r\n      this.$emit('item-deleted', newAdditionFieldsDict);\r\n    },\r\n\r\n    deleteBlock() {\r\n      this.$emit('delete-block', { blockToDelete: this.selectedBlockView });\r\n    },\r\n\r\n    deleteLink() {\r\n      this.$emit('delete-link', this.selectedLink);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.editing-panel {\r\n  padding: 1px;\r\n  text-align: left;\r\n  background-color: #f1f1f1;\r\n  margin-bottom: 30px;\r\n  margin-top: 30px;\r\n}\r\n\r\n.input-title {\r\n  padding-left: 15px;\r\n}\r\n\r\n.panel-header {\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  padding-left: 20px;\r\n  padding-right: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/boundary/EditingPanel.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.selectedBlockView!=null)?_c('div',{staticClass:\"editing-panel\"},[_c('div',{staticClass:\"panel-header\"},[_c('h2',[_vm._v(\"Block modification\")]),_vm._v(\" \"),_c('span',{staticClass:\"closeForm\",attrs:{\"title\":\"Close panel\"},on:{\"click\":_vm.close}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('h3',{staticClass:\"input-title\",staticStyle:{\"margin-top\":\"5px\",\"margin-bottom\":\"5px\"}},[_vm._v(\"\\n        Name:\\n    \")]),_vm._v(\" \"),_c('input',{ref:\"blockTitle\",staticStyle:{\"padding-left\":\"15px\",\"padding-top\":\"5px\",\"margin-bottom\":\"5px\",\"font-size\":\"17px\"},attrs:{\"id\":\"selectedBlockTitle\",\"type\":\"text\",\"placeholder\":\"Enter block title\",\"name\":\"blockTitle\"},domProps:{\"value\":_vm.selectedBlockView.block.title}}),_vm._v(\" \"),_c('h3',{staticClass:\"input-title\",staticStyle:{\"margin-top\":\"5px\",\"margin-bottom\":\"5px\"}},[_vm._v(\"\\n        Description:\\n    \")]),_vm._v(\" \"),_c('input',{ref:\"blockDescription\",staticStyle:{\"padding-left\":\"15px\",\"padding-top\":\"5px\",\"margin-bottom\":\"5px\",\"font-size\":\"17px\"},attrs:{\"id\":\"selectedBlockDescription\",\"type\":\"text\",\"placeholder\":\"Enter block description\",\"name\":\"blockDescription\"},domProps:{\"value\":_vm.selectedBlockView.block.description}}),_vm._v(\" \"),(_vm.selectedBlockView.block.additionalFields)?_c('div',_vm._l((Object.keys(_vm.selectedBlockView.block.additionalFields)),function(attributeKey){return _c('div',{key:attributeKey},[(attributeKey=='stereotype')?_c('div',[_c('h3',{staticClass:\"input-title\",staticStyle:{\"margin-top\":\"5px\",\"margin-bottom\":\"5px\"}},[_vm._v(\"\\n            Stereotype\\n          \")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedStereotype),expression:\"selectedStereotype\"}],ref:\"selectStereotype\",refInFor:true,on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedStereotype=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"Boundary\")]),_vm._v(\" \"),_c('option',[_vm._v(\"Control\")]),_vm._v(\" \"),_c('option',[_vm._v(\"Entity\")]),_vm._v(\" \"),_c('option')])]):_vm._e()])}),0):_vm._e(),_vm._v(\" \"),(_vm.selectedBlockView.block.additionalFields)?_c('div',{ref:\"additionalFieldsSection\"},_vm._l((Object.keys(_vm.selectedBlockView.block.additionalFields)),function(attributeKey){return _c('div',{key:attributeKey},[(attributeKey=='Operations'||attributeKey=='Attributes')?_c('div',[_c('h3',{staticClass:\"input-title\",staticStyle:{\"margin-top\":\"5px\",\"margin-bottom\":\"5px\"}},[_vm._v(\"\\n            \"+_vm._s(attributeKey)+\"\\n          \")]),_vm._v(\" \"),_c('ul',{staticClass:\"additionalFieldList\"},_vm._l((_vm.selectedBlockView.block.additionalFields[attributeKey]),function(attributeValue){return _c('li',{key:attributeValue},[_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\",\"align-items\":\"center\"}},[_c('input',{staticClass:\"additionalFieldItem\",attrs:{\"id\":attributeKey},domProps:{\"value\":attributeValue}}),_vm._v(\" \"),_c('button',{staticClass:\"deleteAttributeValueBtn\",attrs:{\"role\":\"button\"},on:{\"click\":function($event){return _vm.deleteItem(attributeKey, attributeValue)}}},[_vm._v(\"\\n                  X\\n                \")])])])}),0),_vm._v(\" \"),_c('button',{staticClass:\"addNewAttributeValueBtn\",attrs:{\"role\":\"button\"},on:{\"click\":function($event){return _vm.addNewItem(attributeKey)}}},[_vm._v(\"\\n            Add new item\\n          \")])]):(attributeKey!=='stereotype')?_c('div',[_c('div',{staticClass:\"input-title\"},[_vm._v(_vm._s(attributeKey)+\":\")]),_vm._v(\" \"),_c('input',{attrs:{\"type\":\"text\",\"placeholder\":\"Enter property value\"},domProps:{\"value\":_vm.selectedBlockView.block.additionalFields[attributeKey]}})]):_vm._e()])}),0):_vm._e(),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-1\",staticStyle:{\"margin-left\":\"20px\"},on:{\"click\":function($event){return _vm.apply('')}}},[_vm._v(\"\\n      Apply Changes\\n    \")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-1\",staticStyle:{\"margin-left\":\"20px\",\"background\":\"red\",\"color\":\"white\"},on:{\"click\":function($event){return _vm.deleteBlock()}}},[_vm._v(\"\\n      Delete block\\n    \")])]):_vm._e(),_vm._v(\" \"),(_vm.selectedLink!=null)?_c('div',[_c('button',{staticClass:\"btn btn-1\",staticStyle:{\"margin-left\":\"20px\",\"background\":\"red\",\"color\":\"white\"},on:{\"click\":function($event){return _vm.deleteLink()}}},[_vm._v(\"\\n      Delete link\\n    \")])]):_vm._e()])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6445d8ec\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/boundary/EditingPanel.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6445d8ec\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./EditingPanel.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditingPanel.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditingPanel.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6445d8ec\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditingPanel.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6445d8ec\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/EditingPanel.vue\n// module id = null\n// module chunks = ","export default class Block {\r\n  Id = null;\r\n  Type = '';\r\n  coords = [null, null];\r\n  width = null;\r\n  height = null;\r\n  title = '';\r\n  description = '';\r\n  additionalFields = {\r\n    // attrs, methods for 'Class' type\r\n  };\r\n  constructor(Id, Type, x, y, width, height, title = `Default name ${Id}`, description = '', additionalFields = null) {\r\n    this.Id = Id;\r\n    Object.defineProperty(this, 'Id', { writable: false }); // readonly ID\r\n    this.Type = Type;\r\n    this.coords = [x, y];\r\n    this.width = width;\r\n    this.height = height;\r\n    this.description = description;\r\n    if (title.replaceAll(' ', '') === '') {\r\n      this.title = Type;\r\n    } else {\r\n      this.title = title;\r\n    }\r\n    if (this.Type === 'Class' && additionalFields === null) {\r\n      this.additionalFields.Attributes = [];\r\n      this.additionalFields.Operations = [];\r\n      this.additionalFields.stereotype = '';\r\n    } else {\r\n      this.additionalFields = additionalFields;\r\n    }\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title = title;\r\n  }\r\n\r\n  setDescription(description) {\r\n    this.description = description;\r\n  }\r\n\r\n  setCoords(coords) {\r\n    this.coords = coords;\r\n  }\r\n\r\n  setWidth(width) {\r\n    this.width = width;\r\n  }\r\n\r\n  setHeight(height) {\r\n    this.height = height;\r\n  }\r\n\r\n  setAdditionalFields(fields) {\r\n    this.additionalFields = fields;\r\n  }\r\n\r\n  addAttribute(attrContent) {\r\n    if (this.Type === 'Class') {\r\n      this.additionalFields.attrs.push(attrContent);\r\n    }\r\n  }\r\n\r\n  addMethod(methodContent) {\r\n    if (this.Type === 'Class') {\r\n      this.additionalFields.attrs.push(methodContent);\r\n    }\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity/block.js","export default class Link {\n  Id = null;\n  Type = '';\n  sId = null; // sorceID\n  tId = null; // targetID\n  // TODO additional fields. For example name and description\n  constructor(Id, Type, sorceId, targetId) {\n    this.Id = Id;\n    Object.defineProperty(this, 'Id', { writable: false }); // readonly ID\n    this.Type = Type;\n    this.sId = sorceId;\n    this.tId = targetId;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/entity/link.js","<template>\n  <div style=\"display:flex; flex-direction: row; margin-top: 20px\">\n    <diagram-ui v-if=\"showDiagramWindow\" v-bind:currentDiagram=\"this.currentDiagram\"\n                ref=\"diagramUI\" :key=\"keyOfDiagramUI\"\n                v-on:ready-add-new-link=\"addNewLink\"\n                v-on:block-view-selected=\"changeSelected\"\n                v-on:link-selected=\"changeSelectedLink\"\n                v-on:turn-off-link-mode=\"turnOffLinkMode\"/>\n    <div style=\"display:flex; flex-direction: column\">\n      <side-panel v-on:create-block=\"addNewBlock\"\n                  v-bind:is-link-add-mode=\"isLinkAddMode\"\n                  v-bind:supported-block-types=\"supportedBlocks\"\n                  v-bind:supported-link-types=\"supportedLinks\"\n                  v-on:toggle-link-mode=\"toggleLinkMode\"\n                  ref=\"sidePanel\"/>\n      <editing-panel v-if=\"(selectedBlockView!=null || selectedLink!=null)&&isLinkAddMode===false\"\n                     v-bind:selected-block-view=\"selectedBlockView\"\n                     v-bind:selected-link=\"selectedLink\"\n                     v-on:close-panel=\"selectedBlockView.removeLinkPoints();selectedBlockView=null\"\n                     v-on:apply-changes=\"changeFields\"\n                     v-on:item-deleted=\"updateAdditionalFields\"\n                     v-on:delete-block=\"deleteBlockFromSnap\"\n                     v-on:delete-link=\"deleteLinkFromSnap\"/>\n    </div>\n    <!--  TODO add block boundary component  -->\n  </div>\n</template>\n\n<script>\n/* eslint-disable no-console */\nimport DiagramUi from '../boundary/DiagramUI/DiagramUI';\nimport SidePanel from '../boundary/SidePanel/SidePanel';\nimport EditingPanel from '../boundary/EditingPanel';\nimport {\n  createNewBlock,\n  createNewLink,\n  getDiagramContent,\n  updateBlockAdditionalProperties,\n  deleteLink,\n  deleteBlock,\n  initSocketIo,\n  updateBlockTitleProperty,\n  updateBlockDescriptionProperty,\n  registerModifierCallback, registerDeleteBlockCallback,\n  registerAddNewLinkCallback, registerAddNewBlockCallback, registerDeleteLinkCallback,\n} from '../boundary/serverProtocol';\nimport Block from '../entity/block';\nimport Link from '../entity/link';\nimport Diagram from '../entity/diagram';\n\nconst diagramTypes = require('../boundary/SnapUtils/assets/diagramTypes.json');\n\nexport default {\n  name: 'DiagramController',\n  components: { DiagramUi, SidePanel, EditingPanel },\n  props: {\n    currentDiagram: Diagram,\n  },\n\n  data() {\n    return {\n      showDiagramWindow: false,\n      isLinkAddMode: false,\n      keyOfDiagramUI: 0,\n      selectedBlockView: null,\n      selectedLink: null,\n      newBlockProperties: null,\n      newLinkProperties: null,\n      versionNo: null,\n    };\n  },\n\n  mounted() {\n    this.init();\n  },\n\n  methods: {\n    init() {\n      initSocketIo();\n      getDiagramContent(this.currentDiagram.Id, this.loadDiagramContent);\n      registerModifierCallback(this.blockModifierCallback);\n      registerDeleteBlockCallback(this.blockDeleteCallback);\n      registerDeleteLinkCallback(this.deleteLinkCallback);\n      registerAddNewLinkCallback(this.addNewLinkHandler);\n      registerAddNewBlockCallback(this.addNewBlockHandler);\n    },\n\n    blockModifierCallback(data) {\n      console.log('blockModifierCallback. Data:', data);\n      if (data.code != null && data.code !== 200) {\n        console.log('Error occurred in blockModifierCallback, error code: ', data.code);\n        return;\n      }\n      if (data.version != null && Math.abs(data.version - this.versionNo)) {\n        getDiagramContent(this.currentDiagram.Id, this.loadDiagramContent);\n        return;\n      }\n      this.$refs.diagramUI.snapBlocks.forEach((blockView) => {\n        if (blockView.block.Id === data.Id) {\n          if (data.coords !== undefined) {\n            blockView.block.setCoords(data.coords);\n          }\n          if (data.width !== undefined) {\n            blockView.block.setWidth(data.width);\n          }\n          if (data.width !== undefined) {\n            blockView.block.setHeight(data.height);\n          }\n          if (data.title !== undefined) {\n            blockView.block.setTitle(data.title);\n          }\n          if (data.description !== undefined) {\n            blockView.block.setDescription(data.description);\n          }\n          if (data.additionalFields !== undefined) {\n            blockView.block.setAdditionalFields(data.additionalFields);\n          }\n\n          blockView.redrawOnSnap();\n        }\n      });\n\n      if (data.version != null) {\n        this.versionNo = data.version;\n      }\n    },\n\n    blockDeleteCallback(data) {\n      if (data.code != null && data.code !== 200) {\n        console.log('Error occurred in blockDeleteCallback, error code: ', data.code);\n        return;\n      }\n      if (data.version != null && Math.abs(data.version - this.versionNo)) {\n        getDiagramContent(this.currentDiagram.Id, this.loadDiagramContent);\n        return;\n      }\n      let blockToDelete;\n      this.$refs.diagramUI.snapBlocks.forEach((blockView) => {\n        if (blockView.block.Id === data.bId) {\n          blockToDelete = blockView;\n        }\n      });\n\n      this.selectedBlockView = null;\n      this.selectedLink = null;\n      blockToDelete.removeLinkPoints();\n      blockToDelete.blockGroup.remove();\n\n      const blockId = blockToDelete.block.Id;\n      const linksToRemove = [];\n      this.$refs.diagramUI.snapLinks.forEach((link) => {\n        const fromBlockID = link.from.block.Id;\n        const toBlockID = link.to.block.Id;\n        if ((fromBlockID === blockId) || (toBlockID === blockId)) {\n          linksToRemove.push(link);\n        }\n      });\n\n      linksToRemove.forEach((link) => {\n        this.deleteLinkFromSnap(link, false);\n      });\n\n      const index = this.$refs.diagramUI.snapBlocks.indexOf(blockToDelete);\n      this.$refs.diagramUI.snapBlocks.splice(index, 1);\n      this.selectedBlockView = null;\n\n      if (data.version != null) {\n        this.versionNo = data.version;\n      }\n    },\n\n    deleteLinkCallback(data) {\n      if (data.code != null && data.code !== 200) {\n        console.log('Error occurred in deleteLinkCallback, error code: ', data.code);\n        return;\n      }\n      if (data.version != null && Math.abs(data.version - this.versionNo)) {\n        getDiagramContent(this.currentDiagram.Id, this.loadDiagramContent);\n        return;\n      }\n      let linkToDelete;\n      this.$refs.diagramUI.snapLinks.forEach((link) => {\n        console.log(link);\n        if (link.lId === data.lId) {\n          linkToDelete = link;\n        }\n      });\n      if (linkToDelete !== undefined) { this.deleteLinkFromSnap(linkToDelete, false); }\n      if (data.version != null) {\n        this.versionNo = data.version;\n      }\n    },\n\n    // Callback for socketIO on getDiagramContentHandler\n    loadDiagramContent(data) {\n      if (data.code != null && data.code !== 200) {\n        console.log('Error occurred in loadDiagramContent callback, error code: ', data.code);\n        return;\n      }\n      if (data.version != null) {\n        this.versionNo = data.version;\n      }\n      console.log('Diagram content ', data);\n      data.blocks.forEach((block) => {\n        this.currentDiagram.blocks.push(new Block(block.Id, block.Type,\n          block.coords[0], block.coords[1], block.width, block.height,\n          block.title, block.description, block.additionalFields));\n      });\n      data.links.forEach((link) => {\n        this.currentDiagram.links.push(new Link(link.Id, link.Type,\n          link.sId, link.tId));\n      });\n      this.showDiagramWindow = true;\n    },\n\n    // Make request to server\n    addNewBlock(fields) {\n      this.newBlockProperties = {\n        dId: this.currentDiagram.Id,\n        Type: fields.Type,\n        coords: [250, 250],\n        width: 80,\n        height: 80,\n        title: fields.title,\n      };\n\n      createNewBlock(this.newBlockProperties);\n    },\n\n    // Handler when server returns block ID\n    addNewBlockHandler(blockData) {\n      if (blockData.version != null && Math.abs(blockData.version - this.versionNo)) {\n        getDiagramContent(this.currentDiagram.Id, this.loadDiagramContent);\n        return;\n      }\n      console.log('New block ID:', blockData.Id);\n      const newBlock = new Block(blockData.Id, blockData.Type,\n        blockData.coords[0], blockData.coords[1],\n        blockData.width, blockData.height,\n        blockData.title);\n      this.currentDiagram.blocks.push(newBlock);\n      this.$refs.diagramUI.drawNewBlock(newBlock);\n      this.newBlockProperties = null;\n      if (blockData.version != null) {\n        this.versionNo = blockData.version;\n      }\n    },\n\n    deleteLinkFromSnap(linkToDelete, deleteFromServer = true) {\n      this.selectedBlockView = null;\n      this.selectedLink = null;\n      const index = this.$refs.diagramUI.snapLinks.indexOf(linkToDelete);\n      console.log('Delete link:', linkToDelete, index);\n      if (index > -1) {\n        this.$refs.diagramUI.snapLinks.splice(index, 1);\n        linkToDelete.line.remove();\n        linkToDelete.bg.remove();\n        if (linkToDelete.arrow !== undefined) {\n          linkToDelete.arrow.remove();\n        }\n      }\n      if (deleteFromServer) {\n        deleteLink(linkToDelete.lId);\n      }\n    },\n\n    deleteBlockFromSnap(parameters) {\n      const blockId = parameters.blockToDelete.block.Id;\n      deleteBlock(blockId);\n    },\n\n    redrawDiagramUI() {\n      this.keyOfDiagramUI += 1;\n    },\n\n    toggleLinkMode(properties) {\n      this.isLinkAddMode = properties.bool;\n      this.$refs.diagramUI.toggleLinkMode(properties);\n    },\n\n    turnOffLinkMode() {\n      this.isLinkAddMode = false;\n    },\n\n    addNewLink(data) {\n      const linkType = this.$refs.sidePanel.linkType;\n      if (linkType == null) {\n        return;\n      }\n      if (data.targetID == null || data.sourceID == null) {\n        console.log('Link creation error: null as ID');\n        return;\n      }\n      const properties = {\n        dId: this.currentDiagram.Id,\n        Type: linkType,\n        sId: data.sourceID,\n        tId: data.targetID,\n      };\n      console.log('Creating new link');\n      // making request to the server\n      this.newLinkProperties = properties;\n      createNewLink(properties);\n    },\n    // Handler when server returns link ID\n    addNewLinkHandler(linkData) {\n      if (linkData.version != null && Math.abs(linkData.version - this.versionNo)) {\n        getDiagramContent(this.currentDiagram.Id, this.loadDiagramContent);\n        return;\n      }\n      console.log('New Link ID:', linkData.Id);\n      const newLink = new Link(linkData.Id, linkData.Type,\n        linkData.sId, linkData.tId);\n\n      let sourceView;\n      let targetView;\n      this.$refs.diagramUI.snapBlocks.forEach((blockView) => {\n        if (blockView.block.Id === linkData.sId) {\n          sourceView = blockView;\n        }\n        if (blockView.block.Id === linkData.tId) {\n          targetView = blockView;\n        }\n      });\n      this.currentDiagram.links.push(newLink);\n      this.$refs.diagramUI.drawNewLink(linkData.Type, linkData.Id, sourceView, targetView);\n      this.$refs.sidePanel.clear();\n      this.newLinkProperties = null;\n      if (linkData.version != null) {\n        this.versionNo = linkData.version;\n      }\n    },\n\n    changeSelected(blockView) {\n      this.selectedBlockView = blockView;\n    },\n\n    changeSelectedLink(link) {\n      if (this.selectedLink !== null) {\n        this.selectedLink.changeColor('black');\n      }\n      this.selectedLink = link;\n      if (link !== null) {\n        link.changeColor('blue');\n      }\n    },\n\n    changeFields(data) {\n      this.selectedBlockView.removeLinkPoints();\n\n      if (this.selectedBlockView.block.title !== data.title) {\n        updateBlockTitleProperty(this.selectedBlockView.block.Id, data.title);\n        // Later this modification will happen in the handler\n        this.selectedBlockView.block.title = data.title;\n      }\n\n      if (this.selectedBlockView.block.description !== data.description) {\n        updateBlockDescriptionProperty(this.selectedBlockView.block.Id, data.description);\n        // Later this modification will happen in the handler\n        this.selectedBlockView.block.description = data.description;\n      }\n\n      console.log('New add fields', data.additionalFields);\n      updateBlockAdditionalProperties(this.selectedBlockView.block.Id,\n        data.additionalFields);\n      // Later this modification will happen in the handler\n      this.selectedBlockView.block.additionalFields = data.additionalFields;\n\n      this.$refs.diagramUI.changeFields();\n    },\n\n    updateAdditionalFields(newAdditionFieldsDict) {\n      this.selectedBlockView.removeLinkPoints();\n      this.selectedBlockView.block.additionalFields = newAdditionFieldsDict;\n      updateBlockAdditionalProperties(this.selectedBlockView.block.Id,\n        this.selectedBlockView.block.additionalFields);\n      this.$refs.diagramUI.changeFields();\n    },\n  },\n\n  computed: {\n    supportedBlocks() {\n      let blocks = [];\n      if (this.currentDiagram.mode.toLowerCase() === 'free') {\n        const diagramType = diagramTypes\n          .filter(elem => elem.type === 'free')[0];\n        console.log(diagramType);\n        blocks = diagramType.blocks;\n      } else {\n        const diagramType = diagramTypes\n          .filter(elem => elem.type === this.currentDiagram.Type.toLowerCase())[0];\n        if (diagramType === undefined) {\n          console.log(`Unsupported schema: ${this.currentDiagram.Type.toLowerCase()}`);\n        } else {\n          console.log(diagramType);\n          blocks = diagramType.blocks;\n        }\n      }\n      return blocks;\n    },\n    supportedLinks() {\n      let links = [];\n      if (this.currentDiagram.mode.toLowerCase() === 'free') {\n        const diagramType = diagramTypes\n          .filter(elem => elem.type === 'free')[0];\n        console.log(diagramType);\n        links = diagramType.links;\n      } else {\n        const diagramType = diagramTypes\n          .filter(elem => elem.type === this.currentDiagram.Type.toLowerCase())[0];\n        if (diagramType === undefined) {\n          console.log(`Unsupported schema: ${this.currentDiagram.Type.toLowerCase()}`);\n        } else {\n          console.log(diagramType);\n          links = diagramType.links;\n        }\n      }\n      return links;\n    },\n  },\n};\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/controller/DiagramController.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\",\"margin-top\":\"20px\"}},[(_vm.showDiagramWindow)?_c('diagram-ui',{key:_vm.keyOfDiagramUI,ref:\"diagramUI\",attrs:{\"currentDiagram\":this.currentDiagram},on:{\"ready-add-new-link\":_vm.addNewLink,\"block-view-selected\":_vm.changeSelected,\"link-selected\":_vm.changeSelectedLink,\"turn-off-link-mode\":_vm.turnOffLinkMode}}):_vm._e(),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\"}},[_c('side-panel',{ref:\"sidePanel\",attrs:{\"is-link-add-mode\":_vm.isLinkAddMode,\"supported-block-types\":_vm.supportedBlocks,\"supported-link-types\":_vm.supportedLinks},on:{\"create-block\":_vm.addNewBlock,\"toggle-link-mode\":_vm.toggleLinkMode}}),_vm._v(\" \"),((_vm.selectedBlockView!=null || _vm.selectedLink!=null)&&_vm.isLinkAddMode===false)?_c('editing-panel',{attrs:{\"selected-block-view\":_vm.selectedBlockView,\"selected-link\":_vm.selectedLink},on:{\"close-panel\":function($event){_vm.selectedBlockView.removeLinkPoints();_vm.selectedBlockView=null},\"apply-changes\":_vm.changeFields,\"item-deleted\":_vm.updateAdditionalFields,\"delete-block\":_vm.deleteBlockFromSnap,\"delete-link\":_vm.deleteLinkFromSnap}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-cd3f1b0a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/controller/DiagramController.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-cd3f1b0a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DiagramController.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DiagramController.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DiagramController.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-cd3f1b0a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DiagramController.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-cd3f1b0a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/controller/DiagramController.vue\n// module id = null\n// module chunks = ","\r\n\r\n<template>\r\n  <div>\r\n    <div class=\"navbar\">\r\n      <button class=\"btn btn-1\" v-on:click=\"goHome()\">\r\n        Home\r\n      </button>\r\n      <h1 v-if=\"state==='project navigator'\">Project navigator</h1>\r\n      <h1 v-else-if=\"state==='diagram navigator'\">Project \"{{ currentProject.name }}\"</h1>\r\n      <h1 v-else-if=\"state==='diagram editor'\">Diagram \"{{ currentDiagram.name }}\"</h1>\r\n      <button class=\"btn btn-1 btn-sep icon-plus\" v-if=\"state==='project navigator'\"\r\n              v-on:click=\"showCreateNewProjectDialog=true\">\r\n        Create new project\r\n      </button>\r\n      <button class=\"btn btn-1 btn-sep icon-plus\" v-if=\"state==='diagram navigator'\"\r\n              v-on:click=\"showCreateNewDiagramDialog=true\">\r\n        Create new diagram\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"projectTable\" v-if=\"state==='project navigator'\">\r\n      <div class=\"column\" v-for=\"project in projects\" v-bind:key=\"project.Id\">\r\n        <div class=\"card\" v-on:click=\"openProject(project)\">\r\n          <p><b>Name:</b> {{ project.name }}</p>\r\n          <p><b>Description:</b> {{ project.description }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"projectTable\" v-else-if=\"state==='diagram navigator'\">\r\n      <div class=\"column\" v-for=\"diagram in currentProject.diagrams\" v-bind:key=\"diagram.Id\">\r\n        <div class=\"card\" @click=\"openDiagram(diagram)\">\r\n          <p><b>Name:</b> {{ diagram.name }}</p>\r\n          <p><b>Description:</b> {{ diagram.description }}</p>\r\n          <p><b>Type:</b> {{ diagram.Type }} diagram</p>\r\n          <p><b>Mode:</b> {{ diagram.mode }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"diagramEditor\" v-else-if=\"state==='diagram editor'\">\r\n      <diagram-controller v-bind:current-diagram=\"currentDiagram\"/>\r\n    </div>\r\n\r\n    <div v-if=\"showCreateNewProjectDialog\" id=\"id01\" class=\"newProjectModal\">\r\n      <!-- TODO: form @submit handling -->\r\n      <form class=\"newProjectModal-content\">\r\n        <div class=\"formHeader\">\r\n          <h1>Create new project</h1>\r\n          <span v-on:click=\"showCreateNewProjectDialog=false\" class=\"closeForm\"\r\n                title=\"Close form\">X</span>\r\n        </div>\r\n        <hr>\r\n        <div class=\"newProjectForm\">\r\n          <label for=\"NameProj\"><b>Name</b></label>\r\n          <input id=\"NameProj\" type=\"text\" placeholder=\"Enter project name\"\r\n                 name=\"name\" required v-model=\"newName\">\r\n\r\n          <label for=\"DescriptionProj\"><b>Description</b></label>\r\n          <input id=\"DescriptionProj\" type=\"text\" placeholder=\"Enter project description\"\r\n                 name=\"description\" v-model=\"newDescription\">\r\n\r\n          <div class=\"newProjectButtons\">\r\n            <button type=\"button\" v-on:click=\"showCreateNewProjectDialog=false\"\r\n                    class=\"cancelbtn\">\r\n              Cancel\r\n            </button>\r\n            <button type=\"button\" class=\"signupbtn\" v-on:click=\"addProject()\">Create</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div v-if=\"showCreateNewDiagramDialog\" class=\"newProjectModal\">\r\n      <form class=\"newProjectModal-content\">\r\n        <div class=\"formHeader\">\r\n          <h1>Create new diagram</h1>\r\n          <span v-on:click=\"showCreateNewDiagramDialog=false\" class=\"closeForm\"\r\n                title=\"Close form\">X</span>\r\n        </div>\r\n        <hr>\r\n        <div class=\"newProjectForm\">\r\n          <label for=\"Name\"><b>Name</b></label>\r\n          <input id=\"Name\" type=\"text\" placeholder=\"Enter diagram name\"\r\n                 name=\"name\" v-model=\"newName\" required>\r\n\r\n          <label for=\"Description\"><b>Description</b></label>\r\n          <input id=\"Description\" type=\"text\" placeholder=\"Enter diagram description\"\r\n                 name=\"description\" v-model=\"newDescription\">\r\n          <div style=\"display:flex; flex-direction: row; margin-top: 20px\">\r\n            <div>\r\n              <label><b>Diagram mode</b></label>\r\n              <select v-model=\"newDiagramMode\">\r\n                <option>Strict</option>\r\n                <option>Free</option>\r\n              </select>\r\n            </div>\r\n            <div>\r\n              <label><b>Diagram type</b></label>\r\n              <select v-model=\"newDiagramType\">\r\n                <option>Use-case</option>\r\n                <option>Class</option>\r\n              </select>\r\n            </div>\r\n          </div>\r\n          <div class=\"newProjectButtons\">\r\n            <button type=\"button\" v-on:click=\"showCreateNewDiagramDialog=false\" class=\"cancelbtn\">\r\n              Cancel\r\n            </button>\r\n            <button type=\"button\" class=\"signupbtn\" v-on:click=\"addDiagram()\">Create</button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\n/* eslint-disable no-console */\r\nimport DiagramController from './controller/DiagramController';\r\nimport {\r\n  createNewDiagram,\r\n  createNewProject,\r\n  loadDiagramsFromServer,\r\n  loadProjectsFromServer,\r\n  registerUserOnServer,\r\n} from './boundary/serverProtocol';\r\nimport Project from './entity/project';\r\nimport Diagram from './entity/diagram';\r\n\r\nexport default {\r\n  name: 'App',\r\n  components: {\r\n    'diagram-controller': DiagramController,\r\n  },\r\n  data() {\r\n    return {\r\n      projects: [],\r\n      newName: '',\r\n      newDescription: '',\r\n      newDiagramType: 'Use-case',\r\n      newDiagramMode: 'Free',\r\n      currentProject: null,\r\n      currentDiagram: null,\r\n      showCreateNewProjectDialog: false,\r\n      showCreateNewDiagramDialog: false,\r\n      state: 'project navigator',\r\n    };\r\n  },\r\n\r\n  mounted() {\r\n    registerUserOnServer();\r\n    this.projects = loadProjectsFromServer();\r\n  },\r\n\r\n  methods: {\r\n    addProject() {\r\n      const properties = {\r\n        name: this.newName,\r\n        description: this.newDescription,\r\n      };\r\n      createNewProject(properties).then((pId) => {\r\n        console.log('New project ID:', pId);\r\n        const newProject = new Project(pId, this.newName, this.newDescription);\r\n        this.projects = [...this.projects, newProject];\r\n        this.showCreateNewProjectDialog = false;\r\n        this.showProject(newProject);\r\n      });\r\n    },\r\n\r\n    openProject(project) {\r\n      this.showProject(project);\r\n      this.currentProject.diagrams = loadDiagramsFromServer(project.Id);\r\n    },\r\n\r\n    showProject(project) {\r\n      this.currentProject = project;\r\n      this.state = 'diagram navigator';\r\n      this.newName = '';\r\n      this.newDescription = '';\r\n    },\r\n\r\n    addDiagram() {\r\n      // TODO: Creating of diagram request to server\r\n      const properties = {\r\n        pId: this.currentProject.Id,\r\n        name: this.newName,\r\n        description: this.newDescription,\r\n        Type: this.newDiagramType,\r\n        mode: this.newDiagramMode,\r\n      };\r\n      createNewDiagram(properties).then((dId) => {\r\n        const newDiagram = new Diagram(\r\n          dId,\r\n          this.newName,\r\n          this.newDescription,\r\n          this.newDiagramType,\r\n          this.newDiagramMode,\r\n        );\r\n        this.currentProject.diagrams = [...this.currentProject.diagrams, newDiagram];\r\n        this.showCreateNewDiagramDialog = false;\r\n        this.showDiagram(newDiagram);\r\n      });\r\n    },\r\n\r\n    openDiagram(diagram) {\r\n      this.showDiagram(diagram);\r\n    },\r\n\r\n    showDiagram(diagram) {\r\n      this.currentDiagram = diagram;\r\n      this.state = 'diagram editor';\r\n      this.newName = '';\r\n      this.newDescription = '';\r\n    },\r\n\r\n    goHome() {\r\n      this.state = 'project navigator';\r\n      this.currentDiagram = null;\r\n      this.currentProject = null;\r\n    },\r\n\r\n    clear() {\r\n      this.newName = '';\r\n      this.newDescription = '';\r\n      this.newDiagramType = 'use-case';\r\n      this.newDiagramMode = 'free';\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n@import \"static/projectList.css\";\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"navbar\"},[_c('button',{staticClass:\"btn btn-1\",on:{\"click\":function($event){return _vm.goHome()}}},[_vm._v(\"\\n      Home\\n    \")]),_vm._v(\" \"),(_vm.state==='project navigator')?_c('h1',[_vm._v(\"Project navigator\")]):(_vm.state==='diagram navigator')?_c('h1',[_vm._v(\"Project \\\"\"+_vm._s(_vm.currentProject.name)+\"\\\"\")]):(_vm.state==='diagram editor')?_c('h1',[_vm._v(\"Diagram \\\"\"+_vm._s(_vm.currentDiagram.name)+\"\\\"\")]):_vm._e(),_vm._v(\" \"),(_vm.state==='project navigator')?_c('button',{staticClass:\"btn btn-1 btn-sep icon-plus\",on:{\"click\":function($event){_vm.showCreateNewProjectDialog=true}}},[_vm._v(\"\\n      Create new project\\n    \")]):_vm._e(),_vm._v(\" \"),(_vm.state==='diagram navigator')?_c('button',{staticClass:\"btn btn-1 btn-sep icon-plus\",on:{\"click\":function($event){_vm.showCreateNewDiagramDialog=true}}},[_vm._v(\"\\n      Create new diagram\\n    \")]):_vm._e()]),_vm._v(\" \"),(_vm.state==='project navigator')?_c('div',{staticClass:\"projectTable\"},_vm._l((_vm.projects),function(project){return _c('div',{key:project.Id,staticClass:\"column\"},[_c('div',{staticClass:\"card\",on:{\"click\":function($event){return _vm.openProject(project)}}},[_c('p',[_c('b',[_vm._v(\"Name:\")]),_vm._v(\" \"+_vm._s(project.name))]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Description:\")]),_vm._v(\" \"+_vm._s(project.description))])])])}),0):(_vm.state==='diagram navigator')?_c('div',{staticClass:\"projectTable\"},_vm._l((_vm.currentProject.diagrams),function(diagram){return _c('div',{key:diagram.Id,staticClass:\"column\"},[_c('div',{staticClass:\"card\",on:{\"click\":function($event){return _vm.openDiagram(diagram)}}},[_c('p',[_c('b',[_vm._v(\"Name:\")]),_vm._v(\" \"+_vm._s(diagram.name))]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Description:\")]),_vm._v(\" \"+_vm._s(diagram.description))]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Type:\")]),_vm._v(\" \"+_vm._s(diagram.Type)+\" diagram\")]),_vm._v(\" \"),_c('p',[_c('b',[_vm._v(\"Mode:\")]),_vm._v(\" \"+_vm._s(diagram.mode))])])])}),0):(_vm.state==='diagram editor')?_c('div',{staticClass:\"diagramEditor\"},[_c('diagram-controller',{attrs:{\"current-diagram\":_vm.currentDiagram}})],1):_vm._e(),_vm._v(\" \"),(_vm.showCreateNewProjectDialog)?_c('div',{staticClass:\"newProjectModal\",attrs:{\"id\":\"id01\"}},[_c('form',{staticClass:\"newProjectModal-content\"},[_c('div',{staticClass:\"formHeader\"},[_c('h1',[_vm._v(\"Create new project\")]),_vm._v(\" \"),_c('span',{staticClass:\"closeForm\",attrs:{\"title\":\"Close form\"},on:{\"click\":function($event){_vm.showCreateNewProjectDialog=false}}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"newProjectForm\"},[_vm._m(0),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newName),expression:\"newName\"}],attrs:{\"id\":\"NameProj\",\"type\":\"text\",\"placeholder\":\"Enter project name\",\"name\":\"name\",\"required\":\"\"},domProps:{\"value\":(_vm.newName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newName=$event.target.value}}}),_vm._v(\" \"),_vm._m(1),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newDescription),expression:\"newDescription\"}],attrs:{\"id\":\"DescriptionProj\",\"type\":\"text\",\"placeholder\":\"Enter project description\",\"name\":\"description\"},domProps:{\"value\":(_vm.newDescription)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newDescription=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticClass:\"newProjectButtons\"},[_c('button',{staticClass:\"cancelbtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showCreateNewProjectDialog=false}}},[_vm._v(\"\\n            Cancel\\n          \")]),_vm._v(\" \"),_c('button',{staticClass:\"signupbtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addProject()}}},[_vm._v(\"Create\")])])])])]):_vm._e(),_vm._v(\" \"),(_vm.showCreateNewDiagramDialog)?_c('div',{staticClass:\"newProjectModal\"},[_c('form',{staticClass:\"newProjectModal-content\"},[_c('div',{staticClass:\"formHeader\"},[_c('h1',[_vm._v(\"Create new diagram\")]),_vm._v(\" \"),_c('span',{staticClass:\"closeForm\",attrs:{\"title\":\"Close form\"},on:{\"click\":function($event){_vm.showCreateNewDiagramDialog=false}}},[_vm._v(\"X\")])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('div',{staticClass:\"newProjectForm\"},[_vm._m(2),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newName),expression:\"newName\"}],attrs:{\"id\":\"Name\",\"type\":\"text\",\"placeholder\":\"Enter diagram name\",\"name\":\"name\",\"required\":\"\"},domProps:{\"value\":(_vm.newName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newName=$event.target.value}}}),_vm._v(\" \"),_vm._m(3),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newDescription),expression:\"newDescription\"}],attrs:{\"id\":\"Description\",\"type\":\"text\",\"placeholder\":\"Enter diagram description\",\"name\":\"description\"},domProps:{\"value\":(_vm.newDescription)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.newDescription=$event.target.value}}}),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"row\",\"margin-top\":\"20px\"}},[_c('div',[_vm._m(4),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newDiagramMode),expression:\"newDiagramMode\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.newDiagramMode=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"Strict\")]),_vm._v(\" \"),_c('option',[_vm._v(\"Free\")])])]),_vm._v(\" \"),_c('div',[_vm._m(5),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.newDiagramType),expression:\"newDiagramType\"}],on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.newDiagramType=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',[_vm._v(\"Use-case\")]),_vm._v(\" \"),_c('option',[_vm._v(\"Class\")])])])]),_vm._v(\" \"),_c('div',{staticClass:\"newProjectButtons\"},[_c('button',{staticClass:\"cancelbtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.showCreateNewDiagramDialog=false}}},[_vm._v(\"\\n            Cancel\\n          \")]),_vm._v(\" \"),_c('button',{staticClass:\"signupbtn\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){return _vm.addDiagram()}}},[_vm._v(\"Create\")])])])])]):_vm._e()])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"NameProj\"}},[_c('b',[_vm._v(\"Name\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"DescriptionProj\"}},[_c('b',[_vm._v(\"Description\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"Name\"}},[_c('b',[_vm._v(\"Name\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{attrs:{\"for\":\"Description\"}},[_c('b',[_vm._v(\"Description\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',[_c('b',[_vm._v(\"Diagram mode\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',[_c('b',[_vm._v(\"Diagram type\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-09c716bc\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-09c716bc\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-09c716bc\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import Vue from 'vue';\nimport Router from 'vue-router';\n\nVue.use(Router);\n\nexport default new Router({\n  routes: [\n\n  ],\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue';\nimport App from './App';\nimport router from './router';\n\nVue.config.productionTip = false;\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>',\n});\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","module.exports = [{\"type\":\"free\",\"blocks\":[\"Class\",\"Use-case\",\"Actor\"],\"links\":[\"Association\",\"Association(Bidirectional)\",\"Dependency\"]},{\"type\":\"use-case\",\"blocks\":[\"Use-case\",\"Actor\"],\"links\":[\"Association\",\"Association(Bidirectional)\",\"Dependency\"]},{\"type\":\"class\",\"blocks\":[\"Class\"],\"links\":[\"Association\",\"Association(Bidirectional)\",\"Dependency\"]}]\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/SnapUtils/assets/diagramTypes.json\n// module id = PPhy\n// module chunks = 1","module.exports = \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4NCjxnIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yXzIpIj4NCjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgZmlsbD0id2hpdGUiLz4NCjxjaXJjbGUgY3g9IjM5LjUiIGN5PSIxNC41IiByPSIxNC4yNSIgZmlsbD0iIzYwRUZGRiIgc3Ryb2tlPSJibGFjayIgc3Ryb2tlLXdpZHRoPSIwLjUiLz4NCjxsaW5lIHgxPSIzOS41IiB5MT0iMjkiIHgyPSIzOS41IiB5Mj0iNjEiIHN0cm9rZT0iYmxhY2siLz4NCjxsaW5lIHgxPSIzOS4zNzQiIHkxPSI2MC4zMTIiIHgyPSIyMy4zOTA3IiB5Mj0iODAuMzI2MSIgc3Ryb2tlPSJibGFjayIvPg0KPGxpbmUgeDE9IjU3LjA5MDMiIHkxPSI3OS45NTMyIiB4Mj0iMzkuNjI2NSIgeTI9IjYwLjMzMjQiIHN0cm9rZT0iYmxhY2siLz4NCjxsaW5lIHgxPSIxNiIgeTE9IjM2LjUiIHgyPSI2MyIgeTI9IjM2LjUiIHN0cm9rZT0iYmxhY2siLz4NCjwvZz4NCjxkZWZzPg0KPGNsaXBQYXRoIGlkPSJjbGlwMF8yXzIiPg0KPHJlY3Qgd2lkdGg9IjgwIiBoZWlnaHQ9IjgwIiBmaWxsPSJ3aGl0ZSIvPg0KPC9jbGlwUGF0aD4NCjwvZGVmcz4NCjwvc3ZnPg0K\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/SnapUtils/assets/actor.svg\n// module id = daKz\n// module chunks = 1","/**\n * Initialize a new `Emitter`.\n *\n * @api public\n */\n\nexport function Emitter(obj) {\n  if (obj) return mixin(obj);\n}\n\n/**\n * Mixin the emitter properties.\n *\n * @param {Object} obj\n * @return {Object}\n * @api private\n */\n\nfunction mixin(obj) {\n  for (var key in Emitter.prototype) {\n    obj[key] = Emitter.prototype[key];\n  }\n  return obj;\n}\n\n/**\n * Listen on the given `event` with `fn`.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.on =\nEmitter.prototype.addEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\n    .push(fn);\n  return this;\n};\n\n/**\n * Adds an `event` listener that will be invoked a single\n * time then automatically removed.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.once = function(event, fn){\n  function on() {\n    this.off(event, on);\n    fn.apply(this, arguments);\n  }\n\n  on.fn = fn;\n  this.on(event, on);\n  return this;\n};\n\n/**\n * Remove the given callback for `event` or all\n * registered callbacks.\n *\n * @param {String} event\n * @param {Function} fn\n * @return {Emitter}\n * @api public\n */\n\nEmitter.prototype.off =\nEmitter.prototype.removeListener =\nEmitter.prototype.removeAllListeners =\nEmitter.prototype.removeEventListener = function(event, fn){\n  this._callbacks = this._callbacks || {};\n\n  // all\n  if (0 == arguments.length) {\n    this._callbacks = {};\n    return this;\n  }\n\n  // specific event\n  var callbacks = this._callbacks['$' + event];\n  if (!callbacks) return this;\n\n  // remove all handlers\n  if (1 == arguments.length) {\n    delete this._callbacks['$' + event];\n    return this;\n  }\n\n  // remove specific handler\n  var cb;\n  for (var i = 0; i < callbacks.length; i++) {\n    cb = callbacks[i];\n    if (cb === fn || cb.fn === fn) {\n      callbacks.splice(i, 1);\n      break;\n    }\n  }\n\n  // Remove event specific arrays for event types that no\n  // one is subscribed for to avoid memory leak.\n  if (callbacks.length === 0) {\n    delete this._callbacks['$' + event];\n  }\n\n  return this;\n};\n\n/**\n * Emit `event` with the given args.\n *\n * @param {String} event\n * @param {Mixed} ...\n * @return {Emitter}\n */\n\nEmitter.prototype.emit = function(event){\n  this._callbacks = this._callbacks || {};\n\n  var args = new Array(arguments.length - 1)\n    , callbacks = this._callbacks['$' + event];\n\n  for (var i = 1; i < arguments.length; i++) {\n    args[i - 1] = arguments[i];\n  }\n\n  if (callbacks) {\n    callbacks = callbacks.slice(0);\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\n      callbacks[i].apply(this, args);\n    }\n  }\n\n  return this;\n};\n\n// alias used for reserved events (protected method)\nEmitter.prototype.emitReserved = Emitter.prototype.emit;\n\n/**\n * Return array of callbacks for `event`.\n *\n * @param {String} event\n * @return {Array}\n * @api public\n */\n\nEmitter.prototype.listeners = function(event){\n  this._callbacks = this._callbacks || {};\n  return this._callbacks['$' + event] || [];\n};\n\n/**\n * Check if this emitter has `event` handlers.\n *\n * @param {String} event\n * @return {Boolean}\n * @api public\n */\n\nEmitter.prototype.hasListeners = function(event){\n  return !! this.listeners(event).length;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/@socket.io/component-emitter/index.mjs\n// module id = gxDI\n// module chunks = 1","var map = {\n\t\"./actor.svg\": \"daKz\",\n\t\"./blockTypes\": \"Gfgk\",\n\t\"./blockTypes.json\": \"Gfgk\",\n\t\"./diagramTypes\": \"PPhy\",\n\t\"./diagramTypes.json\": \"PPhy\"\n};\nfunction webpackContext(req) {\n\treturn __webpack_require__(webpackContextResolve(req));\n};\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) // check for number or string\n\t\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n\treturn id;\n};\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"rLMc\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/boundary/SnapUtils/assets ^\\.\\/.*$\n// module id = rLMc\n// module chunks = 1"],"sourceRoot":""}